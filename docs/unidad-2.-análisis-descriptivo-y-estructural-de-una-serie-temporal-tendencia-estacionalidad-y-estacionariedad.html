<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad | Propuesta ‚Äî Series de Tiempo (Kaggle: Australia Monthly Retail Turnover)</title>
  <meta name="description" content="3 Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad | Propuesta ‚Äî Series de Tiempo (Kaggle: Australia Monthly Retail Turnover)" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad | Propuesta ‚Äî Series de Tiempo (Kaggle: Australia Monthly Retail Turnover)" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad | Propuesta ‚Äî Series de Tiempo (Kaggle: Australia Monthly Retail Turnover)" />
  
  
  

<meta name="author" content="Edgar Esteban Grajales, Kassandra Mendoza-Sarmiento y Paula Tovar R√≠os" />


<meta name="date" content="2025-11-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"/>
<link rel="next" href="unidad-3-preprocesamiento-y-visualizaci√≥n.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">üìä Series de Tiempo - Kaggle Retail Turnover</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="#introducci%C3%B3n"><i class="fa fa-check"></i><b>1</b> Introducci√≥n</a></li>
<li class="chapter" data-level="2" data-path="index.html"><a href="#unidad-1.-propuesta-de-informaci%C3%B3n-a-pronosticar"><i class="fa fa-check"></i><b>2</b> Unidad 1. Propuesta de informaci√≥n a pronosticar</a>
<ul>
<li class="chapter" data-level="2.1" data-path="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"><a href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"><i class="fa fa-check"></i><b>2.1</b> <strong>Tema y base de datos</strong></a></li>
<li class="chapter" data-level="2.2" data-path="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"><a href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html#importancia-y-valor-agregado"><i class="fa fa-check"></i><b>2.2</b> <strong>Importancia y valor agregado</strong></a></li>
<li class="chapter" data-level="2.3" data-path="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"><a href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html#alcance-propuesto"><i class="fa fa-check"></i><b>2.3</b> <strong>Alcance propuesto</strong></a></li>
<li class="chapter" data-level="2.4" data-path="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html"><a href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html#conclusiones-unidad-1"><i class="fa fa-check"></i><b>2.4</b> <strong>Conclusiones Unidad 1</strong></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="index.html"><a href="#unidad-2.-an%C3%A1lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad"><i class="fa fa-check"></i><b>3</b> Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad</a>
<ul>
<li class="chapter" data-level="3.1" data-path="index.html"><a href="#descripci%C3%B3n-y-justificaci%C3%B3n-del-conjunto-de-datos"><i class="fa fa-check"></i><b>3.1</b> <strong>Descripci√≥n y justificaci√≥n del conjunto de datos</strong></a></li>
<li class="chapter" data-level="3.2" data-path="index.html"><a href="#preparaci%C3%B3n-y-filtrado-de-datos-serie-total-mensual"><i class="fa fa-check"></i><b>3.2</b> <strong>Preparaci√≥n y filtrado de datos: serie total mensual</strong></a></li>
<li class="chapter" data-level="3.3" data-path="index.html"><a href="#construcci%C3%B3n-de-la-serie-temporal"><i class="fa fa-check"></i><b>3.3</b> <strong>Construcci√≥n de la serie temporal</strong></a></li>
<li class="chapter" data-level="3.4" data-path="index.html"><a href="#promedios-m%C3%B3viles-smaema-y-an%C3%A1lisis-de-tendencia"><i class="fa fa-check"></i><b>3.4</b> <strong>Promedios m√≥viles (SMA/EMA) y an√°lisis de tendencia</strong></a></li>
<li class="chapter" data-level="3.5" data-path="index.html"><a href="#estacionalidad-y-rezagos-seasonplot-subseries-acf-y-descomposici%C3%B3n"><i class="fa fa-check"></i><b>3.5</b> <strong>Estacionalidad y rezagos (seasonplot, subseries, ACF y descomposici√≥n)</strong></a></li>
<li class="chapter" data-level="3.6" data-path="index.html"><a href="#diferencias-%CE%B4-y-%CE%B4%E2%82%81%E2%82%82-rezagos-y-estabilizaci%C3%B3n"><i class="fa fa-check"></i><b>3.6</b> <strong>Diferencias Œî y Œî‚ÇÅ‚ÇÇ (rezagos y estabilizaci√≥n)</strong></a></li>
<li class="chapter" data-level="3.7" data-path="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html"><i class="fa fa-check"></i><b>3.7</b> <strong>Conclusiones unidad 2</strong></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="index.html"><a href="#unidad-3-preprocesamiento-y-visualizaci%C3%B3n"><i class="fa fa-check"></i><b>4</b> Unidad 3: Preprocesamiento y visualizaci√≥n</a>
<ul>
<li class="chapter" data-level="4.1" data-path="index.html"><a href="#transformaci%C3%B3n-box-cox-descomposici%C3%B3n-stl"><i class="fa fa-check"></i><b>4.1</b> <strong>Transformaci√≥n Box-Cox + Descomposici√≥n STL</strong></a></li>
<li class="chapter" data-level="4.2" data-path="index.html"><a href="#fuerza-estacional-recomendaciones-de-diferenciaci%C3%B3n"><i class="fa fa-check"></i><b>4.2</b> <strong>Fuerza estacional + recomendaciones de diferenciaci√≥n</strong></a></li>
<li class="chapter" data-level="4.3" data-path="index.html"><a href="#doble-diferenciaci%C3%B3n-regular-y-estacional"><i class="fa fa-check"></i><b>4.3</b> <strong>Doble diferenciaci√≥n (regular y estacional)</strong></a></li>
<li class="chapter" data-level="4.4" data-path="index.html"><a href="#prueba-adf-antesdespu%C3%A9s"><i class="fa fa-check"></i><b>4.4</b> <strong>Prueba ADF antes/despu√©s</strong></a></li>
<li class="chapter" data-level="4.5" data-path="index.html"><a href="#validaci%C3%B3n-visual-acf-y-pacf"><i class="fa fa-check"></i><b>4.5</b> <strong>Validaci√≥n visual: ACF y PACF</strong></a></li>
<li class="chapter" data-level="4.6" data-path="unidad-3-preprocesamiento-y-visualizaci√≥n.html"><a href="unidad-3-preprocesamiento-y-visualizaci√≥n.html"><i class="fa fa-check"></i><b>4.6</b> <strong>Conclusiones unidad 3</strong></a></li>
<li class="chapter" data-level="4.7" data-path="unidad-3-preprocesamiento-y-visualizaci√≥n.html"><a href="unidad-3-preprocesamiento-y-visualizaci√≥n.html#referencias"><i class="fa fa-check"></i><b>4.7</b> <strong>Referencias</strong></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="index.html"><a href="#unidad-4-metodolog%C3%ADa-holter-winter-y-suavizamiento-a-la-variable-tiempo"><i class="fa fa-check"></i><b>5</b> Unidad 4: Metodolog√≠a Holter-Winter y suavizamiento a la variable tiempo</a>
<ul>
<li class="chapter" data-level="5.1" data-path="unidad-4-metodolog√≠a-holter-winter-y-suavizamiento-a-la-variable-tiempo.html"><a href="unidad-4-metodolog√≠a-holter-winter-y-suavizamiento-a-la-variable-tiempo.html"><i class="fa fa-check"></i><b>5.1</b> Ajuste de modelos Holt‚ÄìWinters</a></li>
<li class="chapter" data-level="5.2" data-path="index.html"><a href="#gr%C3%A1ficas-de-pron%C3%B3stico-y-bandas"><i class="fa fa-check"></i><b>5.2</b> Gr√°ficas de pron√≥stico y bandas</a></li>
<li class="chapter" data-level="5.3" data-path="index.html"><a href="#diagn%C3%B3sticos-de-residuales"><i class="fa fa-check"></i><b>5.3</b> Diagn√≥sticos de residuales</a></li>
<li class="chapter" data-level="5.4" data-path="unidad-4-metodolog√≠a-holter-winter-y-suavizamiento-a-la-variable-tiempo.html"><a href="unidad-4-metodolog√≠a-holter-winter-y-suavizamiento-a-la-variable-tiempo.html#conclusiones"><i class="fa fa-check"></i><b>5.4</b> Conclusiones</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="unidad-5-modelos-estacionarios-en-series-de-tiempo.html"><a href="unidad-5-modelos-estacionarios-en-series-de-tiempo.html"><i class="fa fa-check"></i><b>6</b> Unidad 5: Modelos estacionarios en series de tiempo</a>
<ul>
<li class="chapter" data-level="6.1" data-path="index.html"><a href="#evaluaci%C3%B3n-de-estacionariedad"><i class="fa fa-check"></i><b>6.1</b> Evaluaci√≥n de estacionariedad</a></li>
<li class="chapter" data-level="6.2" data-path="index.html"><a href="#identificaci%C3%B3n-y-estimaci%C3%B3n-del-modelo-arima"><i class="fa fa-check"></i><b>6.2</b> Identificaci√≥n y estimaci√≥n del modelo ARIMA</a></li>
<li class="chapter" data-level="6.3" data-path="index.html"><a href="#diagn%C3%B3stico-de-residuales"><i class="fa fa-check"></i><b>6.3</b> Diagn√≥stico de residuales</a></li>
<li class="chapter" data-level="6.4" data-path="index.html"><a href="#pron%C3%B3stico-del-modelo"><i class="fa fa-check"></i><b>6.4</b> Pron√≥stico del modelo</a></li>
<li class="chapter" data-level="6.5" data-path="index.html"><a href="#conclusi%C3%B3n-modelos-estacionarios"><i class="fa fa-check"></i><b>6.5</b> Conclusi√≥n modelos estacionarios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="index.html"><a href="#unidad-6-modelo-prophet-y-serie-de-tiempo-como-regresi%C3%B3n-en-el-tiempo"><i class="fa fa-check"></i><b>7</b> Unidad 6: Modelo Prophet y serie de tiempo como regresi√≥n en el tiempo</a>
<ul>
<li class="chapter" data-level="7.1" data-path="unidad-6-modelo-prophet-y-serie-de-tiempo-como-regresi√≥n-en-el-tiempo.html"><a href="unidad-6-modelo-prophet-y-serie-de-tiempo-como-regresi√≥n-en-el-tiempo.html"><i class="fa fa-check"></i><b>7.1</b> Fundamentos del modelo Prophet</a></li>
<li class="chapter" data-level="7.2" data-path="index.html"><a href="#preparaci%C3%B3n-de-datos-y-ajuste-del-modelo-prophet"><i class="fa fa-check"></i><b>7.2</b> Preparaci√≥n de datos y ajuste del modelo Prophet</a></li>
<li class="chapter" data-level="7.3" data-path="index.html"><a href="#ajuste-del-modelo-prophet-y-an%C3%A1lisis-de-componentes"><i class="fa fa-check"></i><b>7.3</b> Ajuste del modelo Prophet y an√°lisis de componentes</a></li>
<li class="chapter" data-level="7.4" data-path="index.html"><a href="#comparaci%C3%B3n-de-desempe%C3%B1o-entre-holtwinters-arima-y-prophet"><i class="fa fa-check"></i><b>7.4</b> Comparaci√≥n de desempe√±o entre Holt‚ÄìWinters, ARIMA y Prophet</a></li>
<li class="chapter" data-level="7.5" data-path="index.html"><a href="#comparaci%C3%B3n-de-modelos-y-conclusiones"><i class="fa fa-check"></i><b>7.5</b> Comparaci√≥n de modelos y conclusiones</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/paolat87/1_Act_Series_de_tiempo_Bookdown" target="_blank">üåê Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Propuesta ‚Äî Series de Tiempo (Kaggle: Australia Monthly Retail Turnover)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Unidad 2. An√°lisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad<a href="#unidad-2.-an%C3%A1lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>En esta unidad se analizan los componentes fundamentales de una serie temporal nivel, tendencia, estacionalidad y ruido aplicando t√©cnicas gr√°ficas y estad√≠sticas de suavizamiento, descomposici√≥n y diferenciaci√≥n, con el fin de identificar su estructura y preparar la base para el modelamiento predictivo.</p>
<div id="descripci√≥n-y-justificaci√≥n-del-conjunto-de-datos" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> <strong>Descripci√≥n y justificaci√≥n del conjunto de datos</strong><a href="#descripci%C3%B3n-y-justificaci%C3%B3n-del-conjunto-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El conjunto de datos utilizado corresponde al registro hist√≥rico del Retail Trade, Australia, disponible p√∫blicamente en Kaggle bajo el nombre ‚ÄúAustralia Monthly Retail Turnover Data‚Äù.
Este dataset recopila informaci√≥n mensual sobre el volumen de ventas minoristas en diferentes estados y sectores de la econom√≠a australiana desde 1982 hasta la actualidad.</p>
<p>Para este an√°lisis se descarg√≥ el archivo directamente desde Kaggle utilizando la librer√≠a reticulate y el m√≥dulo de Python kagglehub, lo cual garantiza la trazabilidad y reproducibilidad del proceso.
El bloque de c√≥digo permiti√≥ acceder autom√°ticamente a los archivos, identificar el formato de columnas y realizar una vista previa estructurada de las primeras observaciones del conjunto de datos (ver Tabla 1).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-5" tabindex="-1"></a><span class="fu">library</span>(TTR)</span>
<span id="cb1-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-6" tabindex="-1"></a><span class="fu">library</span>(zoo) </span>
<span id="cb1-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-7" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-8" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-9" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb1-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-10" tabindex="-1"></a><span class="fu">library</span>(fabletools)</span>
<span id="cb1-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-11" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb1-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-12" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-13" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-15" tabindex="-1"></a><span class="co"># Helpers: SMA y EMA sin TTR</span></span>
<span id="cb1-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-16" tabindex="-1"></a>SMA_r <span class="ot">&lt;-</span> <span class="cf">function</span>(x, n){</span>
<span id="cb1-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-17" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">return</span>(x)</span>
<span id="cb1-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-18" tabindex="-1"></a>  pad <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA_real_</span>, n <span class="sc">-</span> <span class="dv">1</span><span class="dt">L</span>)</span>
<span id="cb1-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-19" tabindex="-1"></a>  <span class="fu">c</span>(pad, zoo<span class="sc">::</span><span class="fu">rollmean</span>(x, <span class="at">k =</span> n, <span class="at">align =</span> <span class="st">&quot;right&quot;</span>, <span class="at">na.pad =</span> <span class="cn">FALSE</span>))</span>
<span id="cb1-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-20" tabindex="-1"></a>}</span>
<span id="cb1-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-21" tabindex="-1"></a>EMA_r <span class="ot">&lt;-</span> <span class="cf">function</span>(x, n){</span>
<span id="cb1-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-22" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">return</span>(x)</span>
<span id="cb1-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-23" tabindex="-1"></a>  alpha <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">/</span>(n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-24" tabindex="-1"></a>  x0 <span class="ot">&lt;-</span> x</span>
<span id="cb1-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-25" tabindex="-1"></a>  first <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(x0))[<span class="dv">1</span>]</span>
<span id="cb1-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-26" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(first)<span class="sc">==</span><span class="dv">0</span>) <span class="fu">return</span>(<span class="fu">rep</span>(<span class="cn">NA_real_</span>, <span class="fu">length</span>(x)))</span>
<span id="cb1-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-27" tabindex="-1"></a>  x0[<span class="dv">1</span><span class="sc">:</span>first] <span class="ot">&lt;-</span> x0[first]</span>
<span id="cb1-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-28" tabindex="-1"></a>  <span class="fu">as.numeric</span>(stats<span class="sc">::</span><span class="fu">filter</span>(x0, alpha, <span class="at">method =</span> <span class="st">&quot;recursive&quot;</span>))</span>
<span id="cb1-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb1-29" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-1" tabindex="-1"></a><span class="co"># === Descarga y vista previa organizada ===</span></span>
<span id="cb2-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-3" tabindex="-1"></a><span class="co"># Asegurar dependencias</span></span>
<span id="cb2-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-4" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&quot;reticulate&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;reticulate&quot;</span>)</span>
<span id="cb2-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-5" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb2-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-6" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">py_module_available</span>(<span class="st">&quot;kagglehub&quot;</span>)) reticulate<span class="sc">::</span><span class="fu">py_install</span>(<span class="st">&quot;kagglehub&quot;</span>, <span class="at">pip =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-8" tabindex="-1"></a><span class="co"># 1) Descargar dataset desde Kaggle</span></span>
<span id="cb2-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-9" tabindex="-1"></a>kh <span class="ot">&lt;-</span> reticulate<span class="sc">::</span><span class="fu">import</span>(<span class="st">&quot;kagglehub&quot;</span>)</span>
<span id="cb2-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-10" tabindex="-1"></a>dest_root <span class="ot">&lt;-</span> kh<span class="sc">$</span><span class="fu">dataset_download</span>(<span class="st">&quot;kanyaweechomming101/australia-monthly-retail-turnover-data&quot;</span>)</span>
<span id="cb2-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-12" tabindex="-1"></a><span class="co"># 2) Ubicar CSV</span></span>
<span id="cb2-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-13" tabindex="-1"></a>csvs <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dest_root, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.csv$&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-14" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="st">&quot;No se encontraron archivos .csv&quot;</span> <span class="ot">=</span> <span class="fu">length</span>(csvs) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb2-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-15" tabindex="-1"></a>ruta_csv <span class="ot">&lt;-</span> csvs[<span class="dv">1</span>]  <span class="co"># si hay varios, puedes cambiar el √≠ndice</span></span>
<span id="cb2-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-17" tabindex="-1"></a><span class="co"># 3) Leer primeras filas</span></span>
<span id="cb2-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-18" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(dplyr); <span class="fu">library</span>(knitr)</span>
<span id="cb2-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-19" tabindex="-1"></a>peek <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(ruta_csv, <span class="at">n_max =</span> <span class="dv">10</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-20" tabindex="-1"></a></span>
<span id="cb2-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-21" tabindex="-1"></a><span class="co"># 4) Mostrar encabezado y tabla organizada</span></span>
<span id="cb2-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb2-22" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">üì¶ **Vista previa del dataset: Retail Turnover Australia**</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## üì¶ **Vista previa del dataset: Retail Turnover Australia**</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb4-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Archivo cargado desde Kaggle:&quot;</span>, <span class="fu">basename</span>(ruta_csv), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## Archivo cargado desde Kaggle: retail.csv</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb6-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Ubicaci√≥n local:&quot;</span>, dest_root, <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## Ubicaci√≥n local: C:\Users\kmend\.cache\kagglehub\datasets\kanyaweechomming101\australia-monthly-retail-turnover-data\versions\1</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-1" tabindex="-1"></a>peek <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-2" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-3" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb8-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-4" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Tabla 1. Vista previa de las primeras 10 filas del dataset de ventas minoristas en Australia (Kaggle)&quot;</span>,</span>
<span id="cb8-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-5" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&quot;c&quot;</span>,</span>
<span id="cb8-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-6" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Estado&quot;</span>, <span class="st">&quot;Industria&quot;</span>, <span class="st">&quot;ID Serie&quot;</span>, <span class="st">&quot;Mes&quot;</span>, <span class="st">&quot;Turnover&quot;</span>)</span>
<span id="cb8-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb8-7" tabindex="-1"></a>  )</span></code></pre></div>
<table style="width:100%;">
<caption><span id="tab:unnamed-chunk-2">Table 3.1: </span>Tabla 1. Vista previa de las primeras 10 filas del dataset de ventas minoristas en Australia (Kaggle)</caption>
<colgroup>
<col width="29%" />
<col width="40%" />
<col width="10%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Estado</th>
<th align="center">Industria</th>
<th align="center">ID Serie</th>
<th align="center">Mes</th>
<th align="center">Turnover</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Apr</td>
<td align="center">4.4</td>
</tr>
<tr class="even">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 May</td>
<td align="center">3.4</td>
</tr>
<tr class="odd">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Jun</td>
<td align="center">3.6</td>
</tr>
<tr class="even">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Jul</td>
<td align="center">4.0</td>
</tr>
<tr class="odd">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Aug</td>
<td align="center">3.6</td>
</tr>
<tr class="even">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Sep</td>
<td align="center">4.2</td>
</tr>
<tr class="odd">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Oct</td>
<td align="center">4.8</td>
</tr>
<tr class="even">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Nov</td>
<td align="center">5.4</td>
</tr>
<tr class="odd">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1982 Dec</td>
<td align="center">6.9</td>
</tr>
<tr class="even">
<td align="center">Australian Capital Territory</td>
<td align="center">Cafes, restaurants and catering services</td>
<td align="center">A3349849A</td>
<td align="center">1983 Jan</td>
<td align="center">3.8</td>
</tr>
</tbody>
</table>
<p>La tabla muestra las siguientes variables principales:</p>
<table>
<colgroup>
<col width="45%" />
<col width="54%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><strong>Variable</strong></th>
<th align="left"><strong>Descripci√≥n</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>State</strong></td>
<td align="left">Estado o territorio australiano del cual proviene el registro.</td>
</tr>
<tr class="even">
<td align="left"><strong>Industry</strong></td>
<td align="left">Sector econ√≥mico o grupo de actividades comerciales.</td>
</tr>
<tr class="odd">
<td align="left"><strong>Series</strong></td>
<td align="left">Identificador de la serie publicada por la oficina estad√≠stica australiana.</td>
</tr>
<tr class="even">
<td align="left"><strong>Month</strong></td>
<td align="left">Fecha del registro mensual (a√±o y mes).</td>
</tr>
<tr class="odd">
<td align="left"><strong>Turnover</strong></td>
<td align="left">Valor total de ventas minoristas expresado en millones de d√≥lares australianos.</td>
</tr>
</tbody>
</table>
<p>Aunque el dataset contiene m√∫ltiples combinaciones de estado e industria, en esta actividad se analizar√° una serie √∫nica y representativa, correspondiente al ‚ÄúTotal (industry)‚Äù, que refleja el comportamiento global del comercio minorista australiano.
Esta decisi√≥n se tom√≥ porque el objetivo de la Unidad 2 es identificar tendencias, rezagos y estacionalidades en una serie de tiempo de manera clara, sin el ruido ni las fluctuaciones que presentan sectores individuales.</p>
<p>La selecci√≥n del Total (industry) permite:</p>
<p>Observar la tendencia agregada de las ventas en el pa√≠s.</p>
<p>Detectar con mayor precisi√≥n la estacionalidad mensual (patrones de aumento y disminuci√≥n).</p>
<p>Facilitar el uso de herramientas estad√≠sticas de suavizamiento y descomposici√≥n en los bloques siguientes.</p>
<p>A partir de la revisi√≥n de esta tabla y el entendimiento de su estructura, se confirma que el conjunto de datos es adecuado para el estudio de series temporales econ√≥micas, ya que presenta una variable cuantitativa (ventas) observada en intervalos regulares de tiempo (mensuales).
La amplitud temporal del dataset (m√°s de 40 a√±os) permitir√° analizar la evoluci√≥n del comercio minorista, identificando cambios estructurales, ciclos econ√≥micos y comportamientos estacionales que servir√°n como base para las siguientes etapas del an√°lisis.</p>
</div>
<div id="preparaci√≥n-y-filtrado-de-datos-serie-total-mensual" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> <strong>Preparaci√≥n y filtrado de datos: serie total mensual</strong><a href="#preparaci%C3%B3n-y-filtrado-de-datos-serie-total-mensual" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-1" tabindex="-1"></a>df0 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(ruta_csv, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-2" tabindex="-1"></a><span class="fu">names</span>(df0) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">s+|</span><span class="sc">\\</span><span class="st">.|</span><span class="sc">\\</span><span class="st">(|</span><span class="sc">\\</span><span class="st">)|</span><span class="sc">\\</span><span class="st">[|</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;_&quot;</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(df0)))</span>
<span id="cb9-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-4" tabindex="-1"></a><span class="co"># Detectar columnas clave</span></span>
<span id="cb9-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-5" tabindex="-1"></a>cand_fecha <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;date|month|period|time|fecha&quot;</span>, <span class="fu">names</span>(df0), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-6" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="st">&quot;No encuentro columna de fecha&quot;</span> <span class="ot">=</span> <span class="fu">length</span>(cand_fecha) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb9-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-7" tabindex="-1"></a>col_fecha <span class="ot">&lt;-</span> cand_fecha[<span class="dv">1</span>]</span>
<span id="cb9-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-9" tabindex="-1"></a>col_ind <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">&quot;industry|sector|categoria|group&quot;</span>, <span class="fu">names</span>(df0)))) {</span>
<span id="cb9-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-10" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="st">&quot;industry|sector|categoria|group&quot;</span>, <span class="fu">names</span>(df0), <span class="at">value =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span>]</span>
<span id="cb9-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-11" tabindex="-1"></a>} <span class="cf">else</span> <span class="cn">NA_character_</span></span>
<span id="cb9-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-12" tabindex="-1"></a></span>
<span id="cb9-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-13" tabindex="-1"></a>cand_val <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;turnover|value|ventas|importe|amount|index|volume&quot;</span>, <span class="fu">names</span>(df0), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-14" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(cand_val) <span class="sc">==</span> <span class="dv">0</span>) cand_val <span class="ot">&lt;-</span> <span class="fu">names</span>(df0)[<span class="fu">sapply</span>(df0, is.numeric)]</span>
<span id="cb9-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-15" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="st">&quot;No encuentro columna num√©rica de valor&quot;</span> <span class="ot">=</span> <span class="fu">length</span>(cand_val) <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb9-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-16" tabindex="-1"></a>col_valor <span class="ot">&lt;-</span> cand_val[<span class="dv">1</span>]</span>
<span id="cb9-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-18" tabindex="-1"></a><span class="co"># Parseo de fecha robusto (YYYY-MM o variantes)</span></span>
<span id="cb9-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-19" tabindex="-1"></a>df_parsed <span class="ot">&lt;-</span> df0 <span class="sc">%&gt;%</span></span>
<span id="cb9-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha_chr =</span> <span class="fu">as.character</span>(.data[[col_fecha]])) <span class="sc">%&gt;%</span></span>
<span id="cb9-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-21" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-22" tabindex="-1"></a>    <span class="at">ym_try =</span> <span class="fu">suppressWarnings</span>(zoo<span class="sc">::</span><span class="fu">as.yearmon</span>(fecha_chr)),</span>
<span id="cb9-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-23" tabindex="-1"></a>    <span class="at">fecha  =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb9-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-24" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(ym_try) <span class="sc">~</span> <span class="fu">as.Date</span>(ym_try),</span>
<span id="cb9-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-25" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">suppressWarnings</span>(lubridate<span class="sc">::</span><span class="fu">parse_date_time</span>(</span>
<span id="cb9-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-26" tabindex="-1"></a>        fecha_chr, <span class="at">orders =</span> <span class="fu">c</span>(<span class="st">&quot;Y-m-d&quot;</span>,<span class="st">&quot;d/m/Y&quot;</span>,<span class="st">&quot;m/d/Y&quot;</span>,<span class="st">&quot;Y-m&quot;</span>,<span class="st">&quot;Ymd&quot;</span>,<span class="st">&quot;dmY&quot;</span>,<span class="st">&quot;mdY&quot;</span>), <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span></span>
<span id="cb9-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-27" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> <span class="fu">as.Date</span>()</span>
<span id="cb9-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-28" tabindex="-1"></a>    )</span>
<span id="cb9-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-30"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-30" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(fecha))</span>
<span id="cb9-31"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-31" tabindex="-1"></a></span>
<span id="cb9-32"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-32" tabindex="-1"></a></span>
<span id="cb9-33"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-33" tabindex="-1"></a>industry_choice <span class="ot">&lt;-</span> <span class="st">&quot;Total (industry)&quot;</span>  <span class="co"># preferido</span></span>
<span id="cb9-34"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-34" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(col_ind)) {</span>
<span id="cb9-35"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-35" tabindex="-1"></a>  inds <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(df_parsed[[col_ind]]))</span>
<span id="cb9-36"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-36" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Industrias disponibles:</span><span class="sc">\n</span><span class="st">- &quot;</span>, <span class="fu">paste</span>(inds, <span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">- &quot;</span>))</span>
<span id="cb9-37"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-37" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>industry_choice <span class="sc">%in%</span> inds) {</span>
<span id="cb9-38"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-38" tabindex="-1"></a>    patt <span class="ot">&lt;-</span> <span class="st">&quot;(?i)total.*industry|all industries|overall&quot;</span></span>
<span id="cb9-39"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-39" tabindex="-1"></a>    cand <span class="ot">&lt;-</span> <span class="fu">grep</span>(patt, inds, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-40"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-40" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(cand) <span class="sc">&gt;</span> <span class="dv">0</span>) industry_choice <span class="ot">&lt;-</span> cand[<span class="dv">1</span>]</span>
<span id="cb9-41"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-41" tabindex="-1"></a>  }</span>
<span id="cb9-42"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-42" tabindex="-1"></a>  <span class="cf">if</span> (industry_choice <span class="sc">%in%</span> <span class="fu">unique</span>(df_parsed[[col_ind]])) {</span>
<span id="cb9-43"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-43" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df_parsed <span class="sc">%&gt;%</span></span>
<span id="cb9-44"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-44" tabindex="-1"></a>      <span class="fu">filter</span>(.data[[col_ind]] <span class="sc">==</span> industry_choice) <span class="sc">%&gt;%</span></span>
<span id="cb9-45"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-45" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">valor =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(.data[[col_valor]]))) <span class="sc">%&gt;%</span></span>
<span id="cb9-46"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-46" tabindex="-1"></a>      <span class="fu">select</span>(fecha, valor) <span class="sc">%&gt;%</span></span>
<span id="cb9-47"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-47" tabindex="-1"></a>      <span class="fu">arrange</span>(fecha)</span>
<span id="cb9-48"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-48" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Usando industria/segmento: &quot;</span>, industry_choice)</span>
<span id="cb9-49"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-49" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb9-50"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-50" tabindex="-1"></a>    <span class="co"># Fallback: sumar todas las industrias por mes</span></span>
<span id="cb9-51"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-51" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df_parsed <span class="sc">%&gt;%</span></span>
<span id="cb9-52"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-52" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">valor =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(.data[[col_valor]]))) <span class="sc">%&gt;%</span></span>
<span id="cb9-53"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-53" tabindex="-1"></a>      <span class="fu">group_by</span>(fecha) <span class="sc">%&gt;%</span></span>
<span id="cb9-54"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-54" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">valor =</span> <span class="fu">sum</span>(valor, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-55"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-55" tabindex="-1"></a>      <span class="fu">arrange</span>(fecha)</span>
<span id="cb9-56"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-56" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;No encontr√© &#39;Total (industry)&#39;. Usando TOTAL mensual (suma de todas las industrias).&quot;</span>)</span>
<span id="cb9-57"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-57" tabindex="-1"></a>  }</span>
<span id="cb9-58"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-58" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb9-59"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-59" tabindex="-1"></a>  <span class="co"># Si no existe columna de industria, seguimos con la √∫nica serie</span></span>
<span id="cb9-60"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-60" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df_parsed <span class="sc">%&gt;%</span></span>
<span id="cb9-61"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-61" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">valor =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(.data[[col_valor]]))) <span class="sc">%&gt;%</span></span>
<span id="cb9-62"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-62" tabindex="-1"></a>    <span class="fu">select</span>(fecha, valor) <span class="sc">%&gt;%</span></span>
<span id="cb9-63"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-63" tabindex="-1"></a>    <span class="fu">arrange</span>(fecha)</span>
<span id="cb9-64"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-64" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;No hay columna de industria. Usando la serie disponible.&quot;</span>)</span>
<span id="cb9-65"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-65" tabindex="-1"></a>}</span>
<span id="cb9-66"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-66" tabindex="-1"></a></span>
<span id="cb9-67"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-67" tabindex="-1"></a></span>
<span id="cb9-68"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb9-68" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st"> **Serie agregada: Total mensual de ventas minoristas (Australia)**</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  **Serie agregada: Total mensual de ventas minoristas (Australia)**</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb11-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Cada observaci√≥n representa el valor total mensual del comercio minorista sumando todas las industrias.</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## Cada observaci√≥n representa el valor total mensual del comercio minorista sumando todas las industrias.</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-2" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-3" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb13-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-4" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Tabla 2. Serie total mensual de ventas minoristas en Australia (primeras 10 observaciones).&quot;</span>,</span>
<span id="cb13-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-5" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&quot;c&quot;</span>,</span>
<span id="cb13-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-6" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Fecha&quot;</span>, <span class="st">&quot;Valor (millones de AUD)&quot;</span>)</span>
<span id="cb13-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb13-7" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-3">Table 3.2: </span>Tabla 2. Serie total mensual de ventas minoristas en Australia (primeras 10 observaciones).</caption>
<thead>
<tr class="header">
<th align="center">Fecha</th>
<th align="center">Valor (millones de AUD)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1982-04-01</td>
<td align="center">6225.3</td>
</tr>
<tr class="even">
<td align="center">1982-05-01</td>
<td align="center">6382.4</td>
</tr>
<tr class="odd">
<td align="center">1982-06-01</td>
<td align="center">6161.8</td>
</tr>
<tr class="even">
<td align="center">1982-07-01</td>
<td align="center">6398.8</td>
</tr>
<tr class="odd">
<td align="center">1982-08-01</td>
<td align="center">6163.4</td>
</tr>
<tr class="even">
<td align="center">1982-09-01</td>
<td align="center">6330.9</td>
</tr>
<tr class="odd">
<td align="center">1982-10-01</td>
<td align="center">6535.2</td>
</tr>
<tr class="even">
<td align="center">1982-11-01</td>
<td align="center">7021.7</td>
</tr>
<tr class="odd">
<td align="center">1982-12-01</td>
<td align="center">9321.8</td>
</tr>
<tr class="even">
<td align="center">1983-01-01</td>
<td align="center">6286.3</td>
</tr>
</tbody>
</table>
<p>Una vez identificado el conjunto de datos original, el siguiente paso consisti√≥ en preparar la informaci√≥n y filtrar la serie temporal de inter√©s.
El dataset inicial incluye registros mensuales desagregados por estado e industria, lo que genera m√∫ltiples combinaciones posibles.
Para los fines de esta Unidad ‚Äîcentrados en el an√°lisis de la estructura de los datos y la identificaci√≥n de patrones temporales‚Äî se seleccion√≥ una serie agregada, correspondiente al total mensual de ventas minoristas a nivel nacional.</p>
<p>El c√≥digo ejecutado agrupa los registros por la variable fecha y suma el valor del ‚ÄúTurnover‚Äù (ventas) de todas las industrias disponibles.
De este modo, se obtiene una serie m√°s estable y representativa del comportamiento general del comercio minorista australiano.</p>
<p>La Tabla 2 presenta las primeras observaciones de la serie consolidada. En ella se observan las columnas:</p>
<table>
<colgroup>
<col width="45%" />
<col width="54%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><strong>Variable</strong></th>
<th align="left"><strong>Descripci√≥n</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Fecha</strong></td>
<td align="left">Corresponde al primer d√≠a del mes registrado (en formato YYYY-MM-DD).</td>
</tr>
<tr class="even">
<td align="left"><strong>Valor (millones de AUD)</strong></td>
<td align="left">Monto total de ventas minoristas acumuladas para todas las industrias en el mes correspondiente.</td>
</tr>
</tbody>
</table>
<p>Esta transformaci√≥n permite trabajar con una sola serie continua en el tiempo, eliminando la variabilidad interna de los diferentes sectores y conservando la estructura mensual necesaria para los an√°lisis posteriores de tendencia, promedio m√≥vil, rezagos y estacionalidad.</p>
</div>
<div id="construcci√≥n-de-la-serie-temporal" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> <strong>Construcci√≥n de la serie temporal</strong><a href="#construcci%C3%B3n-de-la-serie-temporal" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-1" tabindex="-1"></a><span class="co"># Construcci√≥n de la serie temporal y visualizaci√≥n inicial</span></span>
<span id="cb14-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb14-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-3" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb14-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-4" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb14-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-6" tabindex="-1"></a><span class="co"># 1. Definir frecuencia y convertir a serie de tiempo (mensual)</span></span>
<span id="cb14-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-7" tabindex="-1"></a>freq_ts   <span class="ot">&lt;-</span> <span class="dv">12</span><span class="dt">L</span></span>
<span id="cb14-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-8" tabindex="-1"></a>start_year <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">min</span>(df<span class="sc">$</span>fecha, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb14-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-9" tabindex="-1"></a>start_mon  <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">min</span>(df<span class="sc">$</span>fecha, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb14-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-10" tabindex="-1"></a>ts_y <span class="ot">&lt;-</span> <span class="fu">ts</span>(df<span class="sc">$</span>valor, <span class="at">start =</span> <span class="fu">c</span>(start_year, start_mon), <span class="at">frequency =</span> freq_ts)</span>
<span id="cb14-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-12" tabindex="-1"></a><span class="co"># 2. Mostrar mensaje informativo con formato</span></span>
<span id="cb14-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb14-13" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">üìà **Serie temporal creada correctamente**</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## üìà **Serie temporal creada correctamente**</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb16-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Frecuencia:&quot;</span>, freq_ts, <span class="st">&quot;meses por ciclo (serie mensual)</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## Frecuencia: 12 meses por ciclo (serie mensual)</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb18-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Inicio de la serie:&quot;</span>, <span class="fu">paste0</span>(start_year, <span class="st">&quot;-&quot;</span>, start_mon), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## Inicio de la serie: 1982-4</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb20-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;N√∫mero total de observaciones:&quot;</span>, <span class="fu">length</span>(ts_y), <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## N√∫mero total de observaciones: 441</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-1" tabindex="-1"></a><span class="co"># 3. Tabla resumen inicial (primeros y √∫ltimos valores)</span></span>
<span id="cb22-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-2" tabindex="-1"></a>summary_tbl <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-3" tabindex="-1"></a>  <span class="st">&quot;Periodo inicial&quot;</span> <span class="ot">=</span> <span class="fu">as.character</span>(df<span class="sc">$</span>fecha[<span class="dv">1</span>]),</span>
<span id="cb22-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-4" tabindex="-1"></a>  <span class="st">&quot;Periodo final&quot;</span>   <span class="ot">=</span> <span class="fu">as.character</span>(df<span class="sc">$</span>fecha[<span class="fu">nrow</span>(df)]),</span>
<span id="cb22-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-5" tabindex="-1"></a>  <span class="st">&quot;Observaciones&quot;</span>   <span class="ot">=</span> <span class="fu">nrow</span>(df),</span>
<span id="cb22-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-6" tabindex="-1"></a>  <span class="st">&quot;Frecuencia&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Mensual (12)&quot;</span></span>
<span id="cb22-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-7" tabindex="-1"></a>)</span>
<span id="cb22-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-9" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb22-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-10" tabindex="-1"></a>  summary_tbl,</span>
<span id="cb22-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-11" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Tabla 3. Resumen de la configuraci√≥n de la serie temporal (Total retail turnover, Australia)&quot;</span>,</span>
<span id="cb22-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-12" tabindex="-1"></a>  <span class="at">align =</span> <span class="st">&quot;c&quot;</span></span>
<span id="cb22-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb22-13" tabindex="-1"></a>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-4">Table 3.3: </span>Tabla 3. Resumen de la configuraci√≥n de la serie temporal (Total retail turnover, Australia)</caption>
<thead>
<tr class="header">
<th align="center">Periodo.inicial</th>
<th align="center">Periodo.final</th>
<th align="center">Observaciones</th>
<th align="center">Frecuencia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1982-04-01</td>
<td align="center">2018-12-01</td>
<td align="center">441</td>
<td align="center">Mensual (12)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-1" tabindex="-1"></a><span class="co"># 4. Gr√°fico base con estilo estructurado y color corporativo</span></span>
<span id="cb23-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-2" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> valor)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">&quot;#009E73&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>, <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-5" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-6" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Figura 1. Serie temporal en nivel ‚Äî Total Retail Turnover (Australia)&quot;</span>,</span>
<span id="cb23-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-7" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Ventas minoristas agregadas a nivel nacional (1982‚Äì2024)&quot;</span>,</span>
<span id="cb23-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-8" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;A√±o&quot;</span>,</span>
<span id="cb23-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-9" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span></span>
<span id="cb23-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-10" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-11" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb23-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-12" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb23-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-13" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#333333&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb23-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-14" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#555555&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb23-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-15" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>),</span>
<span id="cb23-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-16" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#333333&quot;</span>),</span>
<span id="cb23-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-17" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#cccccc&quot;</span>),</span>
<span id="cb23-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-18" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb23-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb23-19" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-4-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Una vez consolidada la base de datos con las observaciones mensuales, se construy√≥ el objeto ts que representa la serie temporal del total de ventas minoristas en Australia.
La frecuencia definida fue mensual (frequency = 12), lo que permite capturar los ciclos anuales y analizar la estacionalidad.
El rango temporal de la serie abarca desde abril de 1982 hasta el √∫ltimo periodo disponible en el dataset (2024).</p>
<p>La Tabla 3 resume los par√°metros generales de configuraci√≥n de la serie, incluyendo el n√∫mero total de observaciones, frecuencia y periodo de inicio y fin.</p>
<p>Visualizaci√≥n inicial de la serie</p>
<p>La Figura 1 presenta la serie temporal en su nivel original.
En el gr√°fico se observa una tendencia ascendente pronunciada que refleja el crecimiento sostenido del comercio minorista australiano a lo largo de m√°s de cuatro d√©cadas.
Adem√°s, se aprecian fluctuaciones regulares que sugieren la presencia de estacionalidad mensual, posiblemente relacionada con patrones de consumo estacionales (por ejemplo, picos en diciembre por las ventas navide√±as).</p>
<p>La l√≠nea azul muestra la evoluci√≥n mensual del volumen de ventas, mientras que la l√≠nea verde (suavizada mediante el m√©todo LOESS) permite identificar con mayor claridad la tendencia general de crecimiento.
Esta visualizaci√≥n inicial confirma que la serie no es estacionaria en nivel, ya que su media y su varianza var√≠an con el tiempo.</p>
<p>Con este punto obtendremos la estructura base sobre la cual se aplicar√°n las siguientes t√©cnicas:</p>
<p>Promedios m√≥viles (SMA/EMA) para suavizar fluctuaciones,</p>
<p>Rezagos y diferencias para analizar dependencias temporales, y</p>
<p>Gr√°ficos de estacionalidad y autocorrelaci√≥n para estudiar los ciclos repetitivos.</p>
</div>
<div id="promedios-m√≥viles-smaema-y-an√°lisis-de-tendencia" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> <strong>Promedios m√≥viles (SMA/EMA) y an√°lisis de tendencia</strong><a href="#promedios-m%C3%B3viles-smaema-y-an%C3%A1lisis-de-tendencia" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El promedio m√≥vil es una t√©cnica de suavizamiento usada para resaltar la tendencia de una serie temporal, reduciendo el ruido de corto plazo.
Existen dos tipos principales:</p>
<p>SMA (Simple Moving Average): promedio aritm√©tico de los √∫ltimos ùëò valores.</p>
<p>EMA (Exponential Moving Average): promedio ponderado donde los valores m√°s recientes tienen mayor peso.</p>
<p>F√≥rmulas</p>
<p><strong>Media m√≥vil simple (SMA):</strong></p>
<p><span class="math display">\[
SMA_t = \frac{1}{k} \sum_{i=0}^{k-1} Y_{t-i}
\]</span></p>
<p><strong>Media m√≥vil exponencial (EMA):</strong></p>
<p><span class="math display">\[
EMA_t = \alpha Y_t + (1 - \alpha) EMA_{t-1}, \quad \alpha = \frac{2}{k + 1}
\]</span></p>
<p>En el dataset Australia Monthly Retail Turnover (1982‚Äì2024),se aplicaron dos ventanas:</p>
<p>Ventana corta: 6 meses (EMA) para capturar variaciones r√°pidas.</p>
<p>Ventana larga: 12 meses (SMA) para suavizar el ciclo anual.</p>
<p>Estas t√©cnicas permiten observar la tendencia subyacente de crecimiento del comercio minorista australiano sin el efecto de los picos mensuales.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-1" tabindex="-1"></a><span class="co"># Promedios m√≥viles (SMA / EMA) y an√°lisis de tendencia ===</span></span>
<span id="cb24-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb24-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-3" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb24-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-4" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb24-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-5" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-6" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb24-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-7" tabindex="-1"></a></span>
<span id="cb24-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-8" tabindex="-1"></a><span class="co"># 1. Calcular SMA y EMA</span></span>
<span id="cb24-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-9" tabindex="-1"></a>EMA_classic <span class="ot">&lt;-</span> <span class="cf">function</span>(x, n){</span>
<span id="cb24-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-10" tabindex="-1"></a>  alpha <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">/</span>(n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb24-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-11" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA_real_</span>, <span class="fu">length</span>(x))</span>
<span id="cb24-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-12" tabindex="-1"></a>  idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))</span>
<span id="cb24-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-13" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(idx) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(y)</span>
<span id="cb24-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-14" tabindex="-1"></a>  y[idx[<span class="dv">1</span>]] <span class="ot">&lt;-</span> x[idx[<span class="dv">1</span>]]</span>
<span id="cb24-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-15" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> idx[<span class="sc">-</span><span class="dv">1</span>]) y[i] <span class="ot">&lt;-</span> alpha <span class="sc">*</span> x[i] <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">-</span> alpha) <span class="sc">*</span> y[i <span class="sc">-</span> <span class="dv">1</span>]</span>
<span id="cb24-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-16" tabindex="-1"></a>  y</span>
<span id="cb24-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-17" tabindex="-1"></a>}</span>
<span id="cb24-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-18" tabindex="-1"></a></span>
<span id="cb24-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-19" tabindex="-1"></a>k_short <span class="ot">&lt;-</span> <span class="dv">6</span>    <span class="co"># EMA(6)</span></span>
<span id="cb24-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-20" tabindex="-1"></a>k_long  <span class="ot">&lt;-</span> <span class="dv">12</span>   <span class="co"># SMA(12)</span></span>
<span id="cb24-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-21" tabindex="-1"></a></span>
<span id="cb24-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-22" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb24-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-23" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-24" tabindex="-1"></a>    <span class="st">`</span><span class="at">Nivel</span><span class="st">`</span>     <span class="ot">=</span> valor,</span>
<span id="cb24-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-25" tabindex="-1"></a>    <span class="st">`</span><span class="at">SMA (12m)</span><span class="st">`</span> <span class="ot">=</span> zoo<span class="sc">::</span><span class="fu">rollmean</span>(valor, k_long, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">align =</span> <span class="st">&quot;right&quot;</span>),</span>
<span id="cb24-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-26" tabindex="-1"></a>    <span class="st">`</span><span class="at">EMA (6m)</span><span class="st">`</span>  <span class="ot">=</span> <span class="fu">EMA_classic</span>(valor, k_short)</span>
<span id="cb24-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-27" tabindex="-1"></a>  )</span>
<span id="cb24-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-28" tabindex="-1"></a></span>
<span id="cb24-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-29" tabindex="-1"></a><span class="co">#2. Tabla de par√°metros</span></span>
<span id="cb24-30"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-30" tabindex="-1"></a>param_tbl <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-31"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-31" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-32"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-32" tabindex="-1"></a>  <span class="st">`</span><span class="at">Ventana corta (EMA 6m)</span><span class="st">`</span>  <span class="ot">=</span> <span class="fu">paste</span>(k_short, <span class="st">&quot;meses&quot;</span>),</span>
<span id="cb24-33"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-33" tabindex="-1"></a>  <span class="st">`</span><span class="at">Ventana larga (SMA 12m)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">paste</span>(k_long,  <span class="st">&quot;meses&quot;</span>),</span>
<span id="cb24-34"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-34" tabindex="-1"></a>  <span class="st">`</span><span class="at">Tipo de suavizamiento</span><span class="st">`</span>   <span class="ot">=</span> <span class="st">&quot;Media m√≥vil simple (SMA) y exponencial (EMA)&quot;</span></span>
<span id="cb24-35"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-35" tabindex="-1"></a>)</span>
<span id="cb24-36"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-36" tabindex="-1"></a></span>
<span id="cb24-37"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-37" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb24-38"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-38" tabindex="-1"></a>  param_tbl,</span>
<span id="cb24-39"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-39" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Tabla 3. Par√°metros utilizados para el c√°lculo de promedios m√≥viles.&quot;</span>,</span>
<span id="cb24-40"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-40" tabindex="-1"></a>  <span class="at">align =</span> <span class="st">&quot;c&quot;</span></span>
<span id="cb24-41"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb24-41" tabindex="-1"></a>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-5">Table 3.4: </span>Tabla 3. Par√°metros utilizados para el c√°lculo de promedios m√≥viles.</caption>
<colgroup>
<col width="25%" />
<col width="26%" />
<col width="48%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Ventana corta (EMA 6m)</th>
<th align="center">Ventana larga (SMA 12m)</th>
<th align="center">Tipo de suavizamiento</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 meses</td>
<td align="center">12 meses</td>
<td align="center">Media m√≥vil simple (SMA) y exponencial (EMA)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-1" tabindex="-1"></a><span class="co"># 3. Preparar datos largos para ggplot </span></span>
<span id="cb25-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-2" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-3" tabindex="-1"></a>  <span class="fu">select</span>(fecha, <span class="st">`</span><span class="at">Nivel</span><span class="st">`</span>, <span class="st">`</span><span class="at">SMA (12m)</span><span class="st">`</span>, <span class="st">`</span><span class="at">EMA (6m)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-4" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>fecha, <span class="at">names_to =</span> <span class="st">&quot;Serie&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;valor&quot;</span>)</span>
<span id="cb25-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-6" tabindex="-1"></a>df_long<span class="sc">$</span>Serie <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_long<span class="sc">$</span>Serie,</span>
<span id="cb25-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-7" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Nivel&quot;</span>, <span class="st">&quot;SMA (12m)&quot;</span>, <span class="st">&quot;EMA (6m)&quot;</span>))</span>
<span id="cb25-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-9" tabindex="-1"></a>colores   <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Nivel&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;SMA (12m)&quot;</span> <span class="ot">=</span> <span class="st">&quot;#009E73&quot;</span>, <span class="st">&quot;EMA (6m)&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D55E00&quot;</span>)</span>
<span id="cb25-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-10" tabindex="-1"></a>linetypes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Nivel&quot;</span> <span class="ot">=</span> <span class="st">&quot;solid&quot;</span>,   <span class="st">&quot;SMA (12m)&quot;</span> <span class="ot">=</span> <span class="st">&quot;solid&quot;</span>,   <span class="st">&quot;EMA (6m)&quot;</span> <span class="ot">=</span> <span class="st">&quot;dashed&quot;</span>)</span>
<span id="cb25-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-11" tabindex="-1"></a></span>
<span id="cb25-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-12" tabindex="-1"></a><span class="co"># 4. Figura comparativa </span></span>
<span id="cb25-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-13" tabindex="-1"></a><span class="fu">ggplot</span>(df_long, <span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> valor, <span class="at">color =</span> Serie, <span class="at">linetype =</span> Serie)) <span class="sc">+</span></span>
<span id="cb25-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-14" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.9</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb25-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-15" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> colores) <span class="sc">+</span></span>
<span id="cb25-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-16" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> linetypes) <span class="sc">+</span></span>
<span id="cb25-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-17" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-18" tabindex="-1"></a>    <span class="at">title    =</span> <span class="st">&quot;Figura 2. Tendencia suavizada ‚Äî Nivel, SMA(12) y EMA(6)&quot;</span>,</span>
<span id="cb25-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-19" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;A√±o&quot;</span>,</span>
<span id="cb25-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-20" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span>,</span>
<span id="cb25-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-21" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Serie&quot;</span>,</span>
<span id="cb25-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-22" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">&quot;Serie&quot;</span></span>
<span id="cb25-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-23" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-24" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb25-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-25" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-26" tabindex="-1"></a>    <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333333&quot;</span>),</span>
<span id="cb25-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-27" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#555555&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb25-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-28" tabindex="-1"></a>    <span class="at">axis.title.y  =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb25-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-29" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb25-30"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-30" tabindex="-1"></a>    <span class="at">legend.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb25-31"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-31" tabindex="-1"></a>    <span class="at">panel.border  =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#cccccc&quot;</span>)</span>
<span id="cb25-32"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb25-32" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-5-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>El an√°lisis de promedios m√≥viles permite suavizar la serie temporal y revelar la tendencia subyacente del comercio minorista australiano.
Para este caso, se calcularon dos medidas de suavizamiento complementarias:</p>
<p>SMA (12 meses): promedio m√≥vil simple de un a√±o, que elimina gran parte de las fluctuaciones mensuales.</p>
<p>EMA (6 meses): promedio m√≥vil exponencial de medio a√±o, que asigna mayor peso a los valores recientes.</p>
<p>La Tabla 3 resume los par√°metros de cada m√©todo.</p>
<p>La Figura 2 muestra la comparaci√≥n entre la serie original y las versiones suavizadas, utilizando colores diferenciados</p>
<p>La figura evidencia una tendencia ascendente sostenida en el volumen de ventas minoristas entre 1982 y 2024.
La SMA (12) (l√≠nea verde) muestra un crecimiento continuo con leves pausas durante crisis econ√≥micas, mientras que la EMA (6) (l√≠nea naranja) capta con mayor sensibilidad las desaceleraciones o repuntes de corto plazo.
Ambos m√©todos confirman que la serie presenta una fuerte no estacionaridad en nivel, producto del crecimiento estructural del comercio.</p>
<p>Los promedios m√≥viles son una herramienta fundamental para distinguir la tendencia general de la variabilidad estacional.
Este resultado establece la base para los siguientes an√°lisis, donde se abordar√° la estacionalidad y la autocorrelaci√≥n temporal para identificar los patrones c√≠clicos que caracterizan la serie.</p>
</div>
<div id="estacionalidad-y-rezagos-seasonplot-subseries-acf-y-descomposici√≥n" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> <strong>Estacionalidad y rezagos (seasonplot, subseries, ACF y descomposici√≥n)</strong><a href="#estacionalidad-y-rezagos-seasonplot-subseries-acf-y-descomposici%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En una serie temporal, la estacionalidad se refiere a los patrones que se repiten a intervalos regulares, como meses, trimestres o a√±os. Estos ciclos son producto de comportamientos peri√≥dicos (por ejemplo, aumentos de ventas en diciembre o ca√≠das en enero).</p>
<p>F√≥rmulas</p>
<p><strong>Modelo aditivo:</strong></p>
<p><span class="math display">\[
Y_t = T_t + S_t + R_t
\]</span></p>
<p><strong>Modelo multiplicativo:</strong></p>
<p><span class="math display">\[
Y_t = T_t \times S_t \times R_t
\]</span></p>
<p><strong>Estimaci√≥n de la tendencia (promedio m√≥vil centrado):</strong></p>
<p><span class="math display">\[
T_t = \frac{1}{m} \sum_{i=-k}^{k} Y_{t+i}
\]</span></p>
<p><strong>√çndices estacionales promedio (modelo aditivo):</strong></p>
<p><span class="math display">\[
S_m = \frac{1}{n} \sum_{j=1}^{n} (Y_{m,j} - T_{m,j})
\]</span></p>
<p><strong>√çndices estacionales promedio (modelo multiplicativo):</strong></p>
<p><span class="math display">\[
S_m = \frac{1}{n} \sum_{j=1}^{n} \frac{Y_{m,j}}{T_{m,j}}
\]</span></p>
<p><strong>Recomposici√≥n (modelo aditivo):</strong></p>
<p><span class="math display">\[
\hat{Y}_t = \hat{T}_t + \hat{S}_t
\]</span></p>
<p><strong>Recomposici√≥n (modelo multiplicativo):</strong></p>
<p><span class="math display">\[
\hat{Y}_t = \hat{T}_t \times \hat{S}_t
\]</span></p>
<p>En el Retail Turnover Australia, se observa un patr√≥n anual (m = 12), con picos en noviembre‚Äìdiciembre y descensos en enero‚Äìfebrero.
Para analizarlo:</p>
<p>Se genera el Seasonplot (Figura 3) para visualizar la periodicidad.</p>
<p>Se utiliza la ACF (Autocorrelaci√≥n) para confirmar que los picos se repiten cada 12 rezagos.</p>
<p>Se aplica la descomposici√≥n STL para separar tendencia, estacionalidad y residuo.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-1" tabindex="-1"></a><span class="co"># Estacionalidad y rezagos ===</span></span>
<span id="cb26-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-2" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb26-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-3" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&quot;forecast&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;forecast&quot;</span>)</span>
<span id="cb26-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-4" tabindex="-1"></a>  <span class="fu">library</span>(forecast)   <span class="co"># ggseasonplot, ggsubseriesplot, ggAcf</span></span>
<span id="cb26-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-5" tabindex="-1"></a>  <span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(ggplot2); <span class="fu">library</span>(knitr); <span class="fu">library</span>(lubridate)</span>
<span id="cb26-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-6" tabindex="-1"></a>})</span>
<span id="cb26-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-7" tabindex="-1"></a></span>
<span id="cb26-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-8" tabindex="-1"></a><span class="co"># Asegurar objeto ts_y (mensual)</span></span>
<span id="cb26-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-9" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">exists</span>(<span class="st">&quot;ts_y&quot;</span>), <span class="fu">is.ts</span>(ts_y), <span class="fu">frequency</span>(ts_y) <span class="sc">==</span> <span class="dv">12</span>)</span>
<span id="cb26-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-10" tabindex="-1"></a></span>
<span id="cb26-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-11" tabindex="-1"></a><span class="co"># ---------- Seasonplot: mismo mes a trav√©s de los a√±os ----------</span></span>
<span id="cb26-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-12" tabindex="-1"></a>df_season <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb26-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-13" tabindex="-1"></a>  <span class="at">fecha =</span> <span class="fu">as.Date</span>(<span class="fu">time</span>(ts_y), <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>),</span>
<span id="cb26-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-14" tabindex="-1"></a>  <span class="at">valor =</span> <span class="fu">as.numeric</span>(ts_y),</span>
<span id="cb26-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-15" tabindex="-1"></a>  <span class="at">anio  =</span> <span class="fu">year</span>(<span class="fu">as.Date</span>(<span class="fu">time</span>(ts_y), <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>)),</span>
<span id="cb26-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-16" tabindex="-1"></a>  <span class="at">mes   =</span> <span class="fu">factor</span>(<span class="fu">month</span>(<span class="fu">as.Date</span>(<span class="fu">time</span>(ts_y), <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>), <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-17" tabindex="-1"></a>                 <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-18" tabindex="-1"></a>)</span>
<span id="cb26-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-19" tabindex="-1"></a></span>
<span id="cb26-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-20" tabindex="-1"></a><span class="co"># Figura 3 (versi√≥n completa: todas las curvas)</span></span>
<span id="cb26-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-21" tabindex="-1"></a><span class="co"># Esta versi√≥n es intencionalmente &#39;cargada&#39; para mostrar el problema de legibilidad.</span></span>
<span id="cb26-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-22" tabindex="-1"></a>p_season_full <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_season, <span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> valor, <span class="at">group =</span> anio)) <span class="sc">+</span></span>
<span id="cb26-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-23" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#7f7f7f&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.35</span>) <span class="sc">+</span></span>
<span id="cb26-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-24" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Figura 3. Estacionalidad anual ‚Äî todas las curvas por a√±o&quot;</span>,</span>
<span id="cb26-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-25" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Versi√≥n ilustrativa: la superposici√≥n de ~40 a√±os dificulta la lectura del patr√≥n&quot;</span>,</span>
<span id="cb26-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-26" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Mes del a√±o&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-27" tabindex="-1"></a>  <span class="fu">theme_light</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb26-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-28" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb26-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-29" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>))</span>
<span id="cb26-30"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb26-30" tabindex="-1"></a><span class="fu">print</span>(p_season_full)</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-1.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-1" tabindex="-1"></a><span class="co"># Figura 3A (√∫ltimos 10 a√±os) </span></span>
<span id="cb27-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-2" tabindex="-1"></a>ult10 <span class="ot">&lt;-</span> (<span class="fu">max</span>(df_season<span class="sc">$</span>anio) <span class="sc">-</span> <span class="dv">9</span>)<span class="sc">:</span><span class="fu">max</span>(df_season<span class="sc">$</span>anio)</span>
<span id="cb27-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-3" tabindex="-1"></a>p_season_10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(df_season, anio <span class="sc">%in%</span> ult10),</span>
<span id="cb27-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-4" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> valor, <span class="at">group =</span> anio, <span class="at">color =</span> <span class="fu">factor</span>(anio))) <span class="sc">+</span></span>
<span id="cb27-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-5" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-6" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">name =</span> <span class="st">&quot;A√±o&quot;</span>, <span class="at">option =</span> <span class="st">&quot;C&quot;</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Figura 3A. Estacionalidad ‚Äî √∫ltimos 10 a√±os&quot;</span>,</span>
<span id="cb27-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Comparaci√≥n clara de perfiles mensuales (solo la d√©cada reciente)&quot;</span>,</span>
<span id="cb27-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Mes del a√±o&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb27-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-10" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb27-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb27-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-12" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>))</span>
<span id="cb27-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb27-13" tabindex="-1"></a><span class="fu">print</span>(p_season_10)</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-2.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-1" tabindex="-1"></a><span class="co"># Figura 3B (por d√©cada: promedio + √∫ltimo a√±o destacado)</span></span>
<span id="cb28-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-2" tabindex="-1"></a>df_dec   <span class="ot">&lt;-</span> df_season <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">decada =</span> <span class="fu">paste0</span>(<span class="fu">floor</span>(anio<span class="sc">/</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>, <span class="st">&quot;s&quot;</span>))</span>
<span id="cb28-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-3" tabindex="-1"></a>mean_dec <span class="ot">&lt;-</span> df_dec <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(decada, mes) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prom =</span> <span class="fu">mean</span>(valor, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb28-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-5" tabindex="-1"></a>anio_reciente <span class="ot">&lt;-</span> <span class="fu">max</span>(df_dec<span class="sc">$</span>anio)</span>
<span id="cb28-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-6" tabindex="-1"></a></span>
<span id="cb28-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-7" tabindex="-1"></a>p_season_dec <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_dec, <span class="fu">aes</span>(mes, valor, <span class="at">group =</span> anio)) <span class="sc">+</span></span>
<span id="cb28-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">color =</span> <span class="st">&quot;#7f7f7f&quot;</span>) <span class="sc">+</span>                              <span class="co"># a√±os de la d√©cada</span></span>
<span id="cb28-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> mean_dec, <span class="fu">aes</span>(mes, prom, <span class="at">group =</span> <span class="dv">1</span>),                     <span class="co"># promedio d√©cada</span></span>
<span id="cb28-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-10" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">linewidth =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb28-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-11" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> <span class="fu">subset</span>(df_dec, anio <span class="sc">==</span> anio_reciente),                   <span class="co"># √∫ltimo a√±o</span></span>
<span id="cb28-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-12" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;#D55E00&quot;</span>, <span class="at">linewidth =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb28-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-13" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> decada, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Figura 3B. Estacionalidad por d√©cada&quot;</span>,</span>
<span id="cb28-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-15" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Gris: a√±os de la d√©cada | Azul: promedio mensual | Naranja: √∫ltimo a√±o disponible&quot;</span>,</span>
<span id="cb28-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-16" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Mes del a√±o&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-17" tabindex="-1"></a>  <span class="fu">theme_light</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb28-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-18" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb28-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-19" tabindex="-1"></a>        <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#f2f2f2&quot;</span>),</span>
<span id="cb28-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-20" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>))</span>
<span id="cb28-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb28-21" tabindex="-1"></a><span class="fu">print</span>(p_season_dec)</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-3.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-1" tabindex="-1"></a><span class="co"># Subseries: promedio por mes (facetas) </span></span>
<span id="cb29-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-2" tabindex="-1"></a>p_subseries <span class="ot">&lt;-</span> <span class="fu">ggsubseriesplot</span>(ts_y) <span class="sc">+</span></span>
<span id="cb29-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-3" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-4" tabindex="-1"></a>    <span class="at">title    =</span> <span class="st">&quot;Figura 4. Subseries mensuales: patr√≥n promedio por mes&quot;</span>,</span>
<span id="cb29-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-5" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Cada panel muestra la serie del mes a trav√©s del tiempo y su promedio&quot;</span>,</span>
<span id="cb29-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-6" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;A√±o&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Turnover (millones de AUD)&quot;</span></span>
<span id="cb29-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-8" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb29-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-9" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-10" tabindex="-1"></a>    <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb29-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-11" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;#555&quot;</span>),</span>
<span id="cb29-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-12" tabindex="-1"></a>    <span class="at">axis.title.y  =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb29-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-13" tabindex="-1"></a>    <span class="at">panel.border  =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>)</span>
<span id="cb29-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-14" tabindex="-1"></a>  )</span>
<span id="cb29-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb29-15" tabindex="-1"></a><span class="fu">print</span>(p_subseries)</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-4.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-1" tabindex="-1"></a><span class="co"># ACF: autocorrelaci√≥n (rezagos) </span></span>
<span id="cb30-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-2" tabindex="-1"></a>p_acf <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(ts_y) <span class="sc">+</span></span>
<span id="cb30-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-3" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-4" tabindex="-1"></a>    <span class="at">title    =</span> <span class="st">&quot;Figura 5. Autocorrelaci√≥n (ACF) de la serie&quot;</span>,</span>
<span id="cb30-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-5" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Picos en rezagos m√∫ltiples de 12 meses confirman estacionalidad anual&quot;</span>,</span>
<span id="cb30-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-6" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Rezago (meses)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Correlaci√≥n&quot;</span></span>
<span id="cb30-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-8" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb30-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-9" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb30-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-10" tabindex="-1"></a>    <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb30-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-11" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;#555&quot;</span>),</span>
<span id="cb30-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-12" tabindex="-1"></a>    <span class="at">panel.border  =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>)</span>
<span id="cb30-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-13" tabindex="-1"></a>  )</span>
<span id="cb30-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb30-14" tabindex="-1"></a><span class="fu">print</span>(p_acf)</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-5.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-1" tabindex="-1"></a><span class="co">#  Descomposici√≥n (STL robusta) </span></span>
<span id="cb31-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-2" tabindex="-1"></a>ts_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">fecha =</span> <span class="fu">as.Date</span>(<span class="fu">time</span>(ts_y), <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>),</span>
<span id="cb31-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-3" tabindex="-1"></a>                <span class="at">valor =</span> <span class="fu">as.numeric</span>(ts_y))</span>
<span id="cb31-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-4" tabindex="-1"></a></span>
<span id="cb31-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-5" tabindex="-1"></a><span class="co"># STL en base a ts (monthly)</span></span>
<span id="cb31-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-6" tabindex="-1"></a>fit_stl <span class="ot">&lt;-</span> <span class="fu">stl</span>(ts_y, <span class="at">s.window =</span> <span class="st">&quot;periodic&quot;</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-7" tabindex="-1"></a><span class="fu">autoplot</span>(fit_stl) <span class="sc">+</span></span>
<span id="cb31-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-8" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-9" tabindex="-1"></a>    <span class="at">title    =</span> <span class="st">&quot;Figura 6. Descomposici√≥n STL: tendencia, estacionalidad y residuo&quot;</span>,</span>
<span id="cb31-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;STL robusta con estacionalidad peri√≥dica (mensual)&quot;</span>,</span>
<span id="cb31-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-11" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Tiempo&quot;</span></span>
<span id="cb31-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb31-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-13" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb31-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-14" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb31-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-15" tabindex="-1"></a>    <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb31-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-16" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;#555&quot;</span>),</span>
<span id="cb31-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-17" tabindex="-1"></a>    <span class="at">panel.border  =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>)</span>
<span id="cb31-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb31-18" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-6-6.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-1" tabindex="-1"></a><span class="co"># Tabla: medias por mes y ranking </span></span>
<span id="cb32-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-2" tabindex="-1"></a>mes_tbl <span class="ot">&lt;-</span> ts_df <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">month</span>(fecha, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-4" tabindex="-1"></a>  <span class="fu">group_by</span>(mes) <span class="sc">|&gt;</span></span>
<span id="cb32-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="st">`</span><span class="at">Promedio mensual</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">mean</span>(valor, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Promedio mensual</span><span class="st">`</span>))</span>
<span id="cb32-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-7" tabindex="-1"></a></span>
<span id="cb32-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-8" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb32-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-9" tabindex="-1"></a>  mes_tbl,</span>
<span id="cb32-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-10" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Tabla 5. Promedio del turnover por mes (ranking descendente).&quot;</span>,</span>
<span id="cb32-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-11" tabindex="-1"></a>  <span class="at">align =</span> <span class="st">&quot;c&quot;</span></span>
<span id="cb32-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb32-12" tabindex="-1"></a>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-6">Table 3.5: </span>Tabla 5. Promedio del turnover por mes (ranking descendente).</caption>
<thead>
<tr class="header">
<th align="center">mes</th>
<th align="center">Promedio mensual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">dic</td>
<td align="center">33143.2</td>
</tr>
<tr class="even">
<td align="center">nov</td>
<td align="center">26772.7</td>
</tr>
<tr class="odd">
<td align="center">oct</td>
<td align="center">26062.2</td>
</tr>
<tr class="even">
<td align="center">ago</td>
<td align="center">24837.4</td>
</tr>
<tr class="odd">
<td align="center">mar</td>
<td align="center">24829.2</td>
</tr>
<tr class="even">
<td align="center">ene</td>
<td align="center">24828.7</td>
</tr>
<tr class="odd">
<td align="center">sept</td>
<td align="center">24802.0</td>
</tr>
<tr class="even">
<td align="center">jul</td>
<td align="center">24695.7</td>
</tr>
<tr class="odd">
<td align="center">may</td>
<td align="center">24567.0</td>
</tr>
<tr class="even">
<td align="center">jun</td>
<td align="center">24084.3</td>
</tr>
<tr class="odd">
<td align="center">abr</td>
<td align="center">23748.0</td>
</tr>
<tr class="even">
<td align="center">feb</td>
<td align="center">22635.9</td>
</tr>
</tbody>
</table>
<p>Seasonplot (Figura 3)</p>
<p>El gr√°fico estacional traza, para cada a√±o, la evoluci√≥n a lo largo de los 12 meses.
Se observa un patr√≥n altamente repetitivo: incrementos hacia el cierre de a√±o y ca√≠das posteriores, evidencia clara de estacionalidad mensual. La superposici√≥n de curvas similares entre a√±os indica que el patr√≥n es estable y persistente.</p>
<p>Para evitar la sobrecarga visual del seasonplot con todos los a√±os, se presentan dos vistas complementarias:</p>
<p>Figura 3A (√∫ltimos 10 a√±os): la estacionalidad reciente es n√≠tida; se mantiene el pico en noviembre‚Äìdiciembre y la ca√≠da en enero‚Äìfebrero.</p>
<p>Figura 3B (facetas por d√©cada): el promedio mensual de cada d√©cada (l√≠nea azul) confirma la estabilidad del patr√≥n anual, mientras que la curva del √∫ltimo a√±o (naranja) permite contrastar el presente con su contexto hist√≥rico.</p>
<p>La serie exhibe estacionalidad anual fuerte y persistente con m√°ximos en los meses de cierre de a√±o.</p>
<p>Subseries mensuales (Figura 4)</p>
<p>Las subseries muestran cada mes como una serie independiente en el tiempo, junto con su promedio.
Los paneles permiten identificar qu√© meses presentan niveles sistem√°ticamente altos (p.¬†ej., noviembre‚Äìdiciembre) y cu√°les tienden a ser bajos (p.¬†ej., enero‚Äìfebrero).
Esto refuerza la lectura del seasonplot con una visi√≥n mes a mes.</p>
<p>Autocorrelaci√≥n (Figura 5)</p>
<p>La ACF exhibe picos significativos en rezagos de 12, 24, 36‚Ä¶ meses, lo cual confirma formalmente la estacionalidad anual. Adem√°s, la persistencia de autocorrelaci√≥n en rezagos cortos indica que la serie no es ruido blanco y posee memoria (dependencia temporal).</p>
<p>Descomposici√≥n STL (Figura 6)</p>
<p>La descomposici√≥n STL separa la serie en tendencia, estacionalidad y residuo.</p>
<ul>
<li><p>La tendencia muestra el crecimiento estructural de largo plazo.</p></li>
<li><p>La estacionalidad mensual es marcada y relativamente estable.</p></li>
<li><p>El residuo concentra la variaci√≥n no explicada (shocks espec√≠ficos, ruido).</p></li>
</ul>
<p>La Tabla 5 resume el promedio hist√≥rico por mes y lo ordena de mayor a menor, facilitando referenciar los picos estacionales en el texto.</p>
<p>La combinaci√≥n de seasonplot, subseries, ACF y STL confirma que la serie presenta tendencia creciente y estacionalidad anual fuerte.
Estos hallazgos orientan las transformaciones para el modelado: diferenciaci√≥n regular (Œî) para estabilizar tendencia y, de ser necesario, diferenciaci√≥n estacional (Œî‚ÇÅ‚ÇÇ) para remover el componente mensual antes de ajustes ARIMA/ETS.</p>
</div>
<div id="diferencias-Œ¥-y-Œ¥‚ÇÅ‚ÇÇ-rezagos-y-estabilizaci√≥n" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> <strong>Diferencias Œî y Œî‚ÇÅ‚ÇÇ (rezagos y estabilizaci√≥n)</strong><a href="#diferencias-%CE%B4-y-%CE%B4%E2%82%81%E2%82%82-rezagos-y-estabilizaci%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El proceso de diferenciaci√≥n busca eliminar la tendencia y la estacionalidad de una serie temporal, con el fin de obtener estacionariedad (una serie con media y varianza constantes a lo largo del tiempo).</p>
<p>Existen dos tipos de diferencias:</p>
<ul>
<li><p>Diferencia regular (Œî): elimina la tendencia.</p></li>
<li><p>Diferencia estacional (Œî12): elimina la estacionalidad anual (para frecuencia mensual).</p></li>
</ul>
<p>F√≥rmula</p>
<p><strong>Diferencia regular (Œî):</strong></p>
<p><span class="math display">\[
\Delta Y_t = Y_t - Y_{t-1}
\]</span></p>
<p><strong>Diferencia estacional (Œî‚ÇÅ‚ÇÇ):</strong></p>
<p><span class="math display">\[
\Delta_{12} Y_t = Y_t - Y_{t-12}
\]</span></p>
<p><strong>Doble diferencia combinada (ŒîŒî‚ÇÅ‚ÇÇ):</strong></p>
<p><span class="math display">\[
\Delta \Delta_{12} Y_t = (Y_t - Y_{t-1}) - (Y_{t-12} - Y_{t-13})
\]</span></p>
<p><strong>Operador de diferencia general:</strong></p>
<p><span class="math display">\[
\nabla^d Y_t = (1 - B)^d Y_t
\]</span></p>
<p>En el Retail Turnover Australia:</p>
<p>La diferencia regular (Œî) reduce la tendencia.</p>
<p>La diferencia estacional (Œî12) elimina el patr√≥n anual.</p>
<p>La combinaci√≥n ŒîŒî12 produce una serie estacionaria, adecuada para modelar con ARIMA o SARIMA.</p>
<p>Nuestro objetivo es mostrar c√≥mo la primera diferencia (Œî) y la diferencia estacional (Œî‚ÇÅ‚ÇÇ) remueven tendencia y estacionalidad, respectivamente, y comprobarlo visualmente y con ACF.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-1" tabindex="-1"></a><span class="co">#Diferencias Œî y Œî‚ÇÅ‚ÇÇ</span></span>
<span id="cb33-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2); <span class="fu">library</span>(dplyr); <span class="fu">library</span>(forecast); <span class="fu">library</span>(knitr)</span>
<span id="cb33-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-4" tabindex="-1"></a><span class="co"># 6.1 Construcci√≥n de diferencias</span></span>
<span id="cb33-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-5" tabindex="-1"></a>ts_d1   <span class="ot">&lt;-</span> <span class="fu">diff</span>(ts_y, <span class="at">lag =</span> <span class="dv">1</span>)          <span class="co"># Œî x_t = x_t - x_{t-1}</span></span>
<span id="cb33-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-6" tabindex="-1"></a>ts_d12  <span class="ot">&lt;-</span> <span class="fu">diff</span>(ts_y, <span class="at">lag =</span> <span class="dv">12</span>)         <span class="co"># Œî‚ÇÅ‚ÇÇ x_t = x_t - x_{t-12}</span></span>
<span id="cb33-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-7" tabindex="-1"></a>ts_d1d12 <span class="ot">&lt;-</span> <span class="fu">diff</span>(ts_d12, <span class="at">lag =</span> <span class="dv">1</span>)       <span class="co"># Œî(Œî‚ÇÅ‚ÇÇ x_t)  -&gt; candidata a estacionaria</span></span>
<span id="cb33-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-8" tabindex="-1"></a></span>
<span id="cb33-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-9" tabindex="-1"></a><span class="co"># Pasar a data.frames para graficar con ggplot</span></span>
<span id="cb33-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-10" tabindex="-1"></a>as_df <span class="ot">&lt;-</span> <span class="cf">function</span>(z) <span class="fu">data.frame</span>(</span>
<span id="cb33-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-11" tabindex="-1"></a>  <span class="at">fecha =</span> <span class="fu">as.Date</span>(<span class="fu">time</span>(z), <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>),</span>
<span id="cb33-12"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-12" tabindex="-1"></a>  <span class="at">valor =</span> <span class="fu">as.numeric</span>(z)</span>
<span id="cb33-13"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-13" tabindex="-1"></a>)</span>
<span id="cb33-14"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-14" tabindex="-1"></a></span>
<span id="cb33-15"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-15" tabindex="-1"></a>df_d1    <span class="ot">&lt;-</span> <span class="fu">as_df</span>(ts_d1)</span>
<span id="cb33-16"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-16" tabindex="-1"></a>df_d12   <span class="ot">&lt;-</span> <span class="fu">as_df</span>(ts_d12)</span>
<span id="cb33-17"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-17" tabindex="-1"></a>df_d1d12 <span class="ot">&lt;-</span> <span class="fu">as_df</span>(ts_d1d12)</span>
<span id="cb33-18"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-18" tabindex="-1"></a></span>
<span id="cb33-19"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-19" tabindex="-1"></a><span class="co"># 6.2 Figuras de las diferencias</span></span>
<span id="cb33-20"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-20" tabindex="-1"></a>g_base <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, titulo, subtit, ylab){</span>
<span id="cb33-21"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-21" tabindex="-1"></a>  <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(fecha, valor)) <span class="sc">+</span></span>
<span id="cb33-22"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-22" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb33-23"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-23" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> titulo, <span class="at">subtitle =</span> subtit, <span class="at">x =</span> <span class="st">&quot;Tiempo&quot;</span>, <span class="at">y =</span> ylab) <span class="sc">+</span></span>
<span id="cb33-24"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-24" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb33-25"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-25" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb33-26"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-26" tabindex="-1"></a>      <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb33-27"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-27" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;#555&quot;</span>),</span>
<span id="cb33-28"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-28" tabindex="-1"></a>      <span class="at">axis.title.y  =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;#0072B2&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb33-29"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-29" tabindex="-1"></a>      <span class="at">panel.border  =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>)</span>
<span id="cb33-30"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-30" tabindex="-1"></a>    )</span>
<span id="cb33-31"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-31" tabindex="-1"></a>}</span>
<span id="cb33-32"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-32" tabindex="-1"></a></span>
<span id="cb33-33"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-33" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">g_base</span>(df_d1,</span>
<span id="cb33-34"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-34" tabindex="-1"></a>             <span class="st">&quot;Figura 7. Primera diferencia (Œî)&quot;</span>,</span>
<span id="cb33-35"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-35" tabindex="-1"></a>             <span class="st">&quot;Elimina gran parte de la tendencia (serie con media m√°s estable).&quot;</span>,</span>
<span id="cb33-36"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb33-36" tabindex="-1"></a>             <span class="fu">expression</span>(Delta<span class="sc">~</span>x[t])))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-1.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb34-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">g_base</span>(df_d12,</span>
<span id="cb34-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb34-2" tabindex="-1"></a>             <span class="st">&quot;Figura 8. Diferencia estacional (Œî‚ÇÅ‚ÇÇ)&quot;</span>,</span>
<span id="cb34-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb34-3" tabindex="-1"></a>             <span class="st">&quot;Elimina el patr√≥n anual repetitivo (estacionalidad).&quot;</span>,</span>
<span id="cb34-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb34-4" tabindex="-1"></a>             <span class="fu">expression</span>(Delta[<span class="dv">12</span>]<span class="sc">~</span>x[t])))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-2.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb35-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">g_base</span>(df_d1d12,</span>
<span id="cb35-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb35-2" tabindex="-1"></a>             <span class="st">&quot;Figura 9. Diferencia combinada Œî¬∑Œî‚ÇÅ‚ÇÇ&quot;</span>,</span>
<span id="cb35-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb35-3" tabindex="-1"></a>             <span class="st">&quot;Primero diferencia estacional, luego primera diferencia ‚Üí candidata a estacionaria.&quot;</span>,</span>
<span id="cb35-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb35-4" tabindex="-1"></a>             <span class="fu">expression</span>(Delta<span class="sc">~</span>Delta[<span class="dv">12</span>]<span class="sc">~</span>x[t])))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-3.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-1" tabindex="-1"></a><span class="co"># 6.3 ACF de las diferencias (para confirmar)</span></span>
<span id="cb36-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-2" tabindex="-1"></a>acf_pl <span class="ot">&lt;-</span> <span class="cf">function</span>(z, titulo){</span>
<span id="cb36-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-3" tabindex="-1"></a>  <span class="fu">ggAcf</span>(z) <span class="sc">+</span></span>
<span id="cb36-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-4" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> titulo, <span class="at">x =</span> <span class="st">&quot;Rezago (meses)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Correlaci√≥n&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-5" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb36-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-6" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb36-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-7" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">13</span>, <span class="at">color =</span> <span class="st">&quot;#333&quot;</span>),</span>
<span id="cb36-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-8" tabindex="-1"></a>      <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;#ccc&quot;</span>)</span>
<span id="cb36-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-9" tabindex="-1"></a>    )</span>
<span id="cb36-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-10" tabindex="-1"></a>}</span>
<span id="cb36-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb36-11" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">acf_pl</span>(ts_d1,   <span class="st">&quot;Figura 10. ACF de Œî&quot;</span>))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-4.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb37-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">acf_pl</span>(ts_d12,  <span class="st">&quot;Figura 11. ACF de Œî‚ÇÅ‚ÇÇ&quot;</span>))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-5.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb38-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">acf_pl</span>(ts_d1d12,<span class="st">&quot;Figura 12. ACF de Œî¬∑Œî‚ÇÅ‚ÇÇ&quot;</span>))</span></code></pre></div>
<p><img src="serie-retail-au_files/figure-html/unnamed-chunk-7-6.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-1" tabindex="-1"></a><span class="co"># 6.4 (Opcional) Mini-tabla de varianzas para mostrar estabilizaci√≥n</span></span>
<span id="cb39-2"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-2" tabindex="-1"></a>stab_tbl <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-3"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-3" tabindex="-1"></a>  <span class="at">Serie =</span> <span class="fu">c</span>(<span class="st">&quot;Nivel&quot;</span>, <span class="st">&quot;Œî&quot;</span>, <span class="st">&quot;Œî‚ÇÅ‚ÇÇ&quot;</span>, <span class="st">&quot;Œî¬∑Œî‚ÇÅ‚ÇÇ&quot;</span>),</span>
<span id="cb39-4"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-4" tabindex="-1"></a>  <span class="at">Varianza =</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="fu">var</span>(ts_y, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb39-5"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-5" tabindex="-1"></a>                     <span class="fu">var</span>(ts_d1, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb39-6"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-6" tabindex="-1"></a>                     <span class="fu">var</span>(ts_d12, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb39-7"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-7" tabindex="-1"></a>                     <span class="fu">var</span>(ts_d1d12, <span class="at">na.rm=</span><span class="cn">TRUE</span>)), <span class="dv">2</span>)</span>
<span id="cb39-8"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-8" tabindex="-1"></a>)</span>
<span id="cb39-9"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-9" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(stab_tbl,</span>
<span id="cb39-10"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-10" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Tabla 6. Varianza por transformaci√≥n: evidencia de estabilizaci√≥n tras diferenciar.&quot;</span>,</span>
<span id="cb39-11"><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#cb39-11" tabindex="-1"></a>             <span class="at">align =</span> <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-7">Table 3.6: </span>Tabla 6. Varianza por transformaci√≥n: evidencia de estabilizaci√≥n tras diferenciar.</caption>
<thead>
<tr class="header">
<th align="center">Serie</th>
<th align="center">Varianza</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Nivel</td>
<td align="center">195743309.0</td>
</tr>
<tr class="even">
<td align="center">Œî</td>
<td align="center">11128031.5</td>
</tr>
<tr class="odd">
<td align="center">Œî‚ÇÅ‚ÇÇ</td>
<td align="center">505792.5</td>
</tr>
<tr class="even">
<td align="center">Œî¬∑Œî‚ÇÅ‚ÇÇ</td>
<td align="center">379212.2</td>
</tr>
</tbody>
</table>
<p>Œî (Figura 7): remueve la tendencia, acercando la serie a media estable, aunque mantiene restos estacionales.</p>
<p>Œî‚ÇÅ‚ÇÇ (Figura 8): remueve la estacionalidad anual (patr√≥n de 12 meses), pero a√∫n puede persistir una deriva de largo plazo.</p>
<p>Œî¬∑Œî‚ÇÅ‚ÇÇ (Figura 9): combinando ambas se obtiene una serie candidata a estacionaria; las ACF (Figuras 10‚Äì12) muestran que los picos estacionales se reducen dr√°sticamente y la dependencia a largo plazo se aten√∫a.</p>
<p>Tabla 6: la varianza disminuye tras diferenciar, lo que apoya la estabilizaci√≥n.</p>
<p>Para modelar esta serie con enfoques ARIMA estacionales, una especificaci√≥n (d = 1, D = 1, m = 12) es un punto de partida razonable, sujeto a verificaci√≥n con diagn√≥sticos formales (AICc, pruebas de ra√≠z unitaria y residuales del modelo).</p>
</div>
<div id="conclusiones-unidad-2" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> <strong>Conclusiones unidad 2</strong><a href="unidad-2.-an√°lisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html#conclusiones-unidad-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El an√°lisis exploratorio de la serie mensual Australia Monthly Retail Turnover (1982‚Äì2024) permiti√≥ caracterizar su comportamiento hist√≥rico mediante t√©cnicas gr√°ficas y estad√≠sticas que revelan su estructura temporal y estacional.</p>
<ol style="list-style-type: decimal">
<li>Identificaci√≥n del patr√≥n general</li>
</ol>
<p>A partir de los promedios m√≥viles (SMA(12) y EMA(6)), se observ√≥ una tendencia creciente sostenida en el volumen de ventas minoristas, con incrementos marcados desde mediados de los a√±os noventa y aceleraciones notorias a partir de 2010.
Esta tendencia indica un crecimiento estructural del comercio minorista australiano, vinculado al aumento del consumo y la expansi√≥n econ√≥mica.</p>
<ol start="2" style="list-style-type: decimal">
<li>Estructura estacional</li>
</ol>
<p>El an√°lisis mediante seasonplot, subseries y promedios mensuales mostr√≥ un patr√≥n estacional anual fuerte y estable, con picos de ventas en noviembre‚Äìdiciembre (√©poca de fin de a√±o) y ca√≠das en enero‚Äìfebrero.
Este comportamiento fue confirmado estad√≠sticamente mediante la funci√≥n de autocorrelaci√≥n (ACF), con picos significativos en m√∫ltiplos de 12 rezagos.</p>
<ol start="3" style="list-style-type: decimal">
<li>Descomposici√≥n y componentes</li>
</ol>
<p>La descomposici√≥n STL robusta separ√≥ la serie en sus tres componentes principales:</p>
<p>Tendencia: crecimiento constante en el largo plazo.</p>
<p>Estacionalidad: patr√≥n mensual repetitivo.</p>
<p>Residuo: fluctuaciones irregulares atribuibles a choques econ√≥micos o eventos espec√≠ficos.
Los componentes de tendencia y estacionalidad resultaron dominantes, lo cual evidenci√≥ la necesidad de aplicar transformaciones previas al modelado.</p>
<ol start="4" style="list-style-type: decimal">
<li>Preprocesamiento para el modelado</li>
</ol>
<p>El proceso de diferenciaci√≥n regular y estacional (Œî y Œî‚ÇÅ‚ÇÇ) permiti√≥ estabilizar la serie al eliminar la tendencia y la estacionalidad, logrando una estructura m√°s adecuada para el ajuste de modelos ARIMA estacionales (SARIMA).
Este paso constituye la base del preprocesamiento y visualizaci√≥n abordado en la Unidad 3.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unidad-1.-propuesta-de-informaci√≥n-a-pronosticar.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="unidad-3-preprocesamiento-y-visualizaci√≥n.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
