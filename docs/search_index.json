[["index.html", "Propuesta — Series de Tiempo (Kaggle: Australia Monthly Retail Turnover) 1 Introducción", " Propuesta — Series de Tiempo (Kaggle: Australia Monthly Retail Turnover) Edgar Esteban Grajales, Kassandra Mendoza-Sarmiento y Paula Tovar Ríos 2025-11-15 1 Introducción La presente propuesta corresponde a la Actividad 1 del curso Análisis de Series de Tiempo,en este actividad se aplica el uso de herramientas TIC, específicamente Bookdown en RStudio y GitHub Pages, para elaborar un documento reproducible que describe el enfoque del proyecto y la base de datos seleccionada para el análisis. El propósito central es definir el contexto y la relevancia del estudio, identificando la información a pronosticar, su valor agregado y los alcances del análisis de series de tiempo propuesto. La propuesta utiliza el dataset público “Australia Monthly Retail Turnover” disponible en Kaggle, lo que permite explorar comportamientos económicos mensuales y sentar las bases para futuros modelos de predicción orientados a la toma de decisiones basadas en datos. "],["unidad-1.-propuesta-de-información-a-pronosticar.html", "2 Unidad 1. Propuesta de información a pronosticar 2.1 Tema y base de datos 2.2 Importancia y valor agregado 2.3 Alcance propuesto 2.4 Conclusiones Unidad 1", " 2 Unidad 1. Propuesta de información a pronosticar 2.1 Tema y base de datos Se trabajará con la serie Retail Turnover mensual de Australia (ventas minoristas agregadas por mes). Esta información proviene del dataset público “Australia Monthly Retail Turnover” disponible en Kaggle y recoge el gasto mensual del comercio al por menor a nivel nacional. 2.2 Importancia y valor agregado Pronosticar el retail turnover es útil para: Planeación comercial e inventarios: anticipar meses de alta y baja demanda reduce quiebres y sobrestock, y guía compras y logística. Gestión financiera: mejora la elaboración de presupuestos y flujo de caja al prever ingresos mensuales esperados. Toma de decisiones tácticas: permite calendarizar campañas y recursos (personal, distribución) según la estacionalidad identificada. Evaluación de choques: ayuda a dimensionar el impacto de eventos excepcionales (feriados extendidos, crisis) sobre el consumo. Por tanto, este análisis permitirá identificar patrones temporales que apoyen la toma de decisiones estratégicas en el comercio minorista australiano. 2.3 Alcance propuesto Se realizará una exploración de la serie mensual, identificación de tendencia y estacionalidad, y un pronóstico base a 12 meses con intervalos, suficiente para soportar decisiones de planeación y seguimiento. Preguntas guía ¿Existen tendencias y estacionalidades por Estado/Industria? ¿Qué modelo (ETS vs ARIMA) ofrece mejor precisión por horizonte (3–6–12 meses)? ¿Cómo cambian los pronósticos agregando por Estado vs por Industria? Fuentes y permisos Fuente: Kaggle (2024). Australia Monthly Retail Turnover Dataset, autor: kanyaweechomming101. URL: https://www.kaggle.com/datasets/kanyaweechomming101/australia-monthly-retail-turnover-data. ABS (Australian Bureau of Statistics) como fuente estadística original (referenciada en la descripción del dataset). Uso: datos públicos para fines académicos;según los términos publicados en la página del dataset; se citará la fuente en el documento. No contiene información personal. 2.4 Conclusiones Unidad 1 Esta propuesta demuestra el uso efectivo de herramientas TIC avanzadas, integrando RStudio, Bookdown y GitHub Pages como entornos para la gestión reproducible de documentos científicos. A través del análisis de la serie de tiempo “Australia Monthly Retail Turnover”, se pretende identificar patrones y tendencias que permitan comprender la dinámica del consumo minorista australiano y su evolución en el tiempo. Este trabajo constituye la base para la aplicación de modelos predictivos que fortalezcan la toma de decisiones en entornos comerciales y académicos, promoviendo la innovación y la analítica como pilares de la gestión de datos. "],["unidad-2.-análisis-descriptivo-y-estructural-de-una-serie-temporal-tendencia-estacionalidad-y-estacionariedad.html", "3 Unidad 2. Análisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad 3.1 Descripción y justificación del conjunto de datos 3.2 Preparación y filtrado de datos: serie total mensual 3.3 Construcción de la serie temporal 3.4 Promedios móviles (SMA/EMA) y análisis de tendencia 3.5 Estacionalidad y rezagos (seasonplot, subseries, ACF y descomposición) 3.6 Diferencias Δ y Δ₁₂ (rezagos y estabilización) 3.7 Conclusiones unidad 2", " 3 Unidad 2. Análisis descriptivo y estructural de una serie temporal: tendencia, estacionalidad y estacionariedad En esta unidad se analizan los componentes fundamentales de una serie temporal nivel, tendencia, estacionalidad y ruido aplicando técnicas gráficas y estadísticas de suavizamiento, descomposición y diferenciación, con el fin de identificar su estructura y preparar la base para el modelamiento predictivo. 3.1 Descripción y justificación del conjunto de datos El conjunto de datos utilizado corresponde al registro histórico del Retail Trade, Australia, disponible públicamente en Kaggle bajo el nombre “Australia Monthly Retail Turnover Data”. Este dataset recopila información mensual sobre el volumen de ventas minoristas en diferentes estados y sectores de la economía australiana desde 1982 hasta la actualidad. Para este análisis se descargó el archivo directamente desde Kaggle utilizando la librería reticulate y el módulo de Python kagglehub, lo cual garantiza la trazabilidad y reproducibilidad del proceso. El bloque de código permitió acceder automáticamente a los archivos, identificar el formato de columnas y realizar una vista previa estructurada de las primeras observaciones del conjunto de datos (ver Tabla 1). library(readr) library(dplyr) library(lubridate) library(ggplot2) library(TTR) library(zoo) library(janitor) library(tidyverse) library(tsibble) library(fabletools) library(reticulate) library(forecast) library(stringr) # Helpers: SMA y EMA sin TTR SMA_r &lt;- function(x, n){ if(n &lt; 2) return(x) pad &lt;- rep(NA_real_, n - 1L) c(pad, zoo::rollmean(x, k = n, align = &quot;right&quot;, na.pad = FALSE)) } EMA_r &lt;- function(x, n){ if(n &lt; 2) return(x) alpha &lt;- 2/(n + 1) x0 &lt;- x first &lt;- which(!is.na(x0))[1] if(length(first)==0) return(rep(NA_real_, length(x))) x0[1:first] &lt;- x0[first] as.numeric(stats::filter(x0, alpha, method = &quot;recursive&quot;)) } # === Descarga y vista previa organizada === # Asegurar dependencias if (!requireNamespace(&quot;reticulate&quot;, quietly = TRUE)) install.packages(&quot;reticulate&quot;) library(reticulate) if (!py_module_available(&quot;kagglehub&quot;)) reticulate::py_install(&quot;kagglehub&quot;, pip = TRUE) # 1) Descargar dataset desde Kaggle kh &lt;- reticulate::import(&quot;kagglehub&quot;) dest_root &lt;- kh$dataset_download(&quot;kanyaweechomming101/australia-monthly-retail-turnover-data&quot;) # 2) Ubicar CSV csvs &lt;- list.files(dest_root, pattern = &quot;\\\\.csv$&quot;, full.names = TRUE, recursive = TRUE) stopifnot(&quot;No se encontraron archivos .csv&quot; = length(csvs) &gt; 0) ruta_csv &lt;- csvs[1] # si hay varios, puedes cambiar el índice # 3) Leer primeras filas library(readr); library(dplyr); library(knitr) peek &lt;- read_csv(ruta_csv, n_max = 10, show_col_types = FALSE) # 4) Mostrar encabezado y tabla organizada cat(&quot;\\n **Vista previa del dataset: Retail Turnover Australia**\\n&quot;) ## ##  **Vista previa del dataset: Retail Turnover Australia** cat(&quot;Archivo cargado desde Kaggle:&quot;, basename(ruta_csv), &quot;\\n&quot;) ## Archivo cargado desde Kaggle: retail.csv cat(&quot;Ubicación local:&quot;, dest_root, &quot;\\n\\n&quot;) ## Ubicación local: C:\\Users\\kmend\\.cache\\kagglehub\\datasets\\kanyaweechomming101\\australia-monthly-retail-turnover-data\\versions\\1 peek %&gt;% head(10) %&gt;% kable( caption = &quot;Tabla 1. Vista previa de las primeras 10 filas del dataset de ventas minoristas en Australia (Kaggle)&quot;, align = &quot;c&quot;, col.names = c(&quot;Estado&quot;, &quot;Industria&quot;, &quot;ID Serie&quot;, &quot;Mes&quot;, &quot;Turnover&quot;) ) Table 3.1: Tabla 1. Vista previa de las primeras 10 filas del dataset de ventas minoristas en Australia (Kaggle) Estado Industria ID Serie Mes Turnover Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Apr 4.4 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 May 3.4 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Jun 3.6 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Jul 4.0 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Aug 3.6 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Sep 4.2 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Oct 4.8 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Nov 5.4 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1982 Dec 6.9 Australian Capital Territory Cafes, restaurants and catering services A3349849A 1983 Jan 3.8 La tabla muestra las siguientes variables principales: Variable Descripción State Estado o territorio australiano del cual proviene el registro. Industry Sector económico o grupo de actividades comerciales. Series Identificador de la serie publicada por la oficina estadística australiana. Month Fecha del registro mensual (año y mes). Turnover Valor total de ventas minoristas expresado en millones de dólares australianos. Aunque el dataset contiene múltiples combinaciones de estado e industria, en esta actividad se analizará una serie única y representativa, correspondiente al “Total (industry)”, que refleja el comportamiento global del comercio minorista australiano. Esta decisión se tomó porque el objetivo de la Unidad 2 es identificar tendencias, rezagos y estacionalidades en una serie de tiempo de manera clara, sin el ruido ni las fluctuaciones que presentan sectores individuales. La selección del Total (industry) permite: Observar la tendencia agregada de las ventas en el país. Detectar con mayor precisión la estacionalidad mensual (patrones de aumento y disminución). Facilitar el uso de herramientas estadísticas de suavizamiento y descomposición en los bloques siguientes. A partir de la revisión de esta tabla y el entendimiento de su estructura, se confirma que el conjunto de datos es adecuado para el estudio de series temporales económicas, ya que presenta una variable cuantitativa (ventas) observada en intervalos regulares de tiempo (mensuales). La amplitud temporal del dataset (más de 40 años) permitirá analizar la evolución del comercio minorista, identificando cambios estructurales, ciclos económicos y comportamientos estacionales que servirán como base para las siguientes etapas del análisis. 3.2 Preparación y filtrado de datos: serie total mensual df0 &lt;- readr::read_csv(ruta_csv, show_col_types = FALSE) names(df0) &lt;- gsub(&quot;\\\\s+|\\\\.|\\\\(|\\\\)|\\\\[|\\\\]&quot;, &quot;_&quot;, tolower(names(df0))) # Detectar columnas clave cand_fecha &lt;- grep(&quot;date|month|period|time|fecha&quot;, names(df0), value = TRUE) stopifnot(&quot;No encuentro columna de fecha&quot; = length(cand_fecha) &gt;= 1) col_fecha &lt;- cand_fecha[1] col_ind &lt;- if (any(grepl(&quot;industry|sector|categoria|group&quot;, names(df0)))) { grep(&quot;industry|sector|categoria|group&quot;, names(df0), value = TRUE)[1] } else NA_character_ cand_val &lt;- grep(&quot;turnover|value|ventas|importe|amount|index|volume&quot;, names(df0), value = TRUE) if (length(cand_val) == 0) cand_val &lt;- names(df0)[sapply(df0, is.numeric)] stopifnot(&quot;No encuentro columna numérica de valor&quot; = length(cand_val) &gt;= 1) col_valor &lt;- cand_val[1] # Parseo de fecha robusto (YYYY-MM o variantes) df_parsed &lt;- df0 %&gt;% mutate(fecha_chr = as.character(.data[[col_fecha]])) %&gt;% mutate( ym_try = suppressWarnings(zoo::as.yearmon(fecha_chr)), fecha = dplyr::case_when( !is.na(ym_try) ~ as.Date(ym_try), TRUE ~ suppressWarnings(lubridate::parse_date_time( fecha_chr, orders = c(&quot;Y-m-d&quot;,&quot;d/m/Y&quot;,&quot;m/d/Y&quot;,&quot;Y-m&quot;,&quot;Ymd&quot;,&quot;dmY&quot;,&quot;mdY&quot;), tz = &quot;UTC&quot; )) %&gt;% as.Date() ) ) %&gt;% filter(!is.na(fecha)) industry_choice &lt;- &quot;Total (industry)&quot; # preferido if (!is.na(col_ind)) { inds &lt;- sort(unique(df_parsed[[col_ind]])) message(&quot;Industrias disponibles:\\n- &quot;, paste(inds, collapse = &quot;\\n- &quot;)) if (!industry_choice %in% inds) { patt &lt;- &quot;(?i)total.*industry|all industries|overall&quot; cand &lt;- grep(patt, inds, value = TRUE) if (length(cand) &gt; 0) industry_choice &lt;- cand[1] } if (industry_choice %in% unique(df_parsed[[col_ind]])) { df &lt;- df_parsed %&gt;% filter(.data[[col_ind]] == industry_choice) %&gt;% mutate(valor = suppressWarnings(as.numeric(.data[[col_valor]]))) %&gt;% select(fecha, valor) %&gt;% arrange(fecha) message(&quot;Usando industria/segmento: &quot;, industry_choice) } else { # Fallback: sumar todas las industrias por mes df &lt;- df_parsed %&gt;% mutate(valor = suppressWarnings(as.numeric(.data[[col_valor]]))) %&gt;% group_by(fecha) %&gt;% summarise(valor = sum(valor, na.rm = TRUE), .groups = &quot;drop&quot;) %&gt;% arrange(fecha) message(&quot;No encontré &#39;Total (industry)&#39;. Usando TOTAL mensual (suma de todas las industrias).&quot;) } } else { # Si no existe columna de industria, seguimos con la única serie df &lt;- df_parsed %&gt;% mutate(valor = suppressWarnings(as.numeric(.data[[col_valor]]))) %&gt;% select(fecha, valor) %&gt;% arrange(fecha) message(&quot;No hay columna de industria. Usando la serie disponible.&quot;) } cat(&quot;\\n **Serie agregada: Total mensual de ventas minoristas (Australia)**\\n&quot;) ## ## **Serie agregada: Total mensual de ventas minoristas (Australia)** cat(&quot;Cada observación representa el valor total mensual del comercio minorista sumando todas las industrias.\\n\\n&quot;) ## Cada observación representa el valor total mensual del comercio minorista sumando todas las industrias. df %&gt;% head(10) %&gt;% kable( caption = &quot;Tabla 2. Serie total mensual de ventas minoristas en Australia (primeras 10 observaciones).&quot;, align = &quot;c&quot;, col.names = c(&quot;Fecha&quot;, &quot;Valor (millones de AUD)&quot;) ) Table 3.2: Tabla 2. Serie total mensual de ventas minoristas en Australia (primeras 10 observaciones). Fecha Valor (millones de AUD) 1982-04-01 6225.3 1982-05-01 6382.4 1982-06-01 6161.8 1982-07-01 6398.8 1982-08-01 6163.4 1982-09-01 6330.9 1982-10-01 6535.2 1982-11-01 7021.7 1982-12-01 9321.8 1983-01-01 6286.3 Una vez identificado el conjunto de datos original, el siguiente paso consistió en preparar la información y filtrar la serie temporal de interés. El dataset inicial incluye registros mensuales desagregados por estado e industria, lo que genera múltiples combinaciones posibles. Para los fines de esta Unidad —centrados en el análisis de la estructura de los datos y la identificación de patrones temporales— se seleccionó una serie agregada, correspondiente al total mensual de ventas minoristas a nivel nacional. El código ejecutado agrupa los registros por la variable fecha y suma el valor del “Turnover” (ventas) de todas las industrias disponibles. De este modo, se obtiene una serie más estable y representativa del comportamiento general del comercio minorista australiano. La Tabla 2 presenta las primeras observaciones de la serie consolidada. En ella se observan las columnas: Variable Descripción Fecha Corresponde al primer día del mes registrado (en formato YYYY-MM-DD). Valor (millones de AUD) Monto total de ventas minoristas acumuladas para todas las industrias en el mes correspondiente. Esta transformación permite trabajar con una sola serie continua en el tiempo, eliminando la variabilidad interna de los diferentes sectores y conservando la estructura mensual necesaria para los análisis posteriores de tendencia, promedio móvil, rezagos y estacionalidad. 3.3 Construcción de la serie temporal # Construcción de la serie temporal y visualización inicial library(ggplot2) library(knitr) library(lubridate) # 1. Definir frecuencia y convertir a serie de tiempo (mensual) freq_ts &lt;- 12L start_year &lt;- lubridate::year(min(df$fecha, na.rm = TRUE)) start_mon &lt;- lubridate::month(min(df$fecha, na.rm = TRUE)) ts_y &lt;- ts(df$valor, start = c(start_year, start_mon), frequency = freq_ts) # 2. Mostrar mensaje informativo con formato cat(&quot;\\n **Serie temporal creada correctamente**\\n&quot;) ## ##  **Serie temporal creada correctamente** cat(&quot;Frecuencia:&quot;, freq_ts, &quot;meses por ciclo (serie mensual)\\n&quot;) ## Frecuencia: 12 meses por ciclo (serie mensual) cat(&quot;Inicio de la serie:&quot;, paste0(start_year, &quot;-&quot;, start_mon), &quot;\\n&quot;) ## Inicio de la serie: 1982-4 cat(&quot;Número total de observaciones:&quot;, length(ts_y), &quot;\\n\\n&quot;) ## Número total de observaciones: 441 # 3. Tabla resumen inicial (primeros y últimos valores) summary_tbl &lt;- data.frame( &quot;Periodo inicial&quot; = as.character(df$fecha[1]), &quot;Periodo final&quot; = as.character(df$fecha[nrow(df)]), &quot;Observaciones&quot; = nrow(df), &quot;Frecuencia&quot; = &quot;Mensual (12)&quot; ) kable( summary_tbl, caption = &quot;Tabla 3. Resumen de la configuración de la serie temporal (Total retail turnover, Australia)&quot;, align = &quot;c&quot; ) Table 3.3: Tabla 3. Resumen de la configuración de la serie temporal (Total retail turnover, Australia) Periodo.inicial Periodo.final Observaciones Frecuencia 1982-04-01 2018-12-01 441 Mensual (12) # 4. Gráfico base con estilo estructurado y color corporativo ggplot(df, aes(x = fecha, y = valor)) + geom_line(color = &quot;#0072B2&quot;, linewidth = 0.8) + geom_smooth(method = &quot;loess&quot;, se = FALSE, color = &quot;#009E73&quot;, linewidth = 0.8, linetype = &quot;solid&quot;) + labs( title = &quot;Figura 1. Serie temporal en nivel — Total Retail Turnover (Australia)&quot;, subtitle = &quot;Ventas minoristas agregadas a nivel nacional (1982–2024)&quot;, x = &quot;Año&quot;, y = &quot;Turnover (millones de AUD)&quot; ) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, color = &quot;#333333&quot;, size = 13), plot.subtitle = element_text(color = &quot;#555555&quot;, size = 10), axis.title.y = element_text(face = &quot;bold&quot;, color = &quot;#0072B2&quot;), axis.text = element_text(color = &quot;#333333&quot;), panel.border = element_rect(color = &quot;#cccccc&quot;), panel.grid.minor = element_blank() ) Una vez consolidada la base de datos con las observaciones mensuales, se construyó el objeto ts que representa la serie temporal del total de ventas minoristas en Australia. La frecuencia definida fue mensual (frequency = 12), lo que permite capturar los ciclos anuales y analizar la estacionalidad. El rango temporal de la serie abarca desde abril de 1982 hasta el último periodo disponible en el dataset (2024). La Tabla 3 resume los parámetros generales de configuración de la serie, incluyendo el número total de observaciones, frecuencia y periodo de inicio y fin. Visualización inicial de la serie La Figura 1 presenta la serie temporal en su nivel original. En el gráfico se observa una tendencia ascendente pronunciada que refleja el crecimiento sostenido del comercio minorista australiano a lo largo de más de cuatro décadas. Además, se aprecian fluctuaciones regulares que sugieren la presencia de estacionalidad mensual, posiblemente relacionada con patrones de consumo estacionales (por ejemplo, picos en diciembre por las ventas navideñas). La línea azul muestra la evolución mensual del volumen de ventas, mientras que la línea verde (suavizada mediante el método LOESS) permite identificar con mayor claridad la tendencia general de crecimiento. Esta visualización inicial confirma que la serie no es estacionaria en nivel, ya que su media y su varianza varían con el tiempo. Con este punto obtendremos la estructura base sobre la cual se aplicarán las siguientes técnicas: Promedios móviles (SMA/EMA) para suavizar fluctuaciones, Rezagos y diferencias para analizar dependencias temporales, y Gráficos de estacionalidad y autocorrelación para estudiar los ciclos repetitivos. 3.4 Promedios móviles (SMA/EMA) y análisis de tendencia El promedio móvil es una técnica de suavizamiento usada para resaltar la tendencia de una serie temporal, reduciendo el ruido de corto plazo. Existen dos tipos principales: SMA (Simple Moving Average): promedio aritmético de los últimos  valores. EMA (Exponential Moving Average): promedio ponderado donde los valores más recientes tienen mayor peso. Fórmulas Media móvil simple (SMA): \\[ SMA_t = \\frac{1}{k} \\sum_{i=0}^{k-1} Y_{t-i} \\] Media móvil exponencial (EMA): \\[ EMA_t = \\alpha Y_t + (1 - \\alpha) EMA_{t-1}, \\quad \\alpha = \\frac{2}{k + 1} \\] En el dataset Australia Monthly Retail Turnover (1982–2024),se aplicaron dos ventanas: Ventana corta: 6 meses (EMA) para capturar variaciones rápidas. Ventana larga: 12 meses (SMA) para suavizar el ciclo anual. Estas técnicas permiten observar la tendencia subyacente de crecimiento del comercio minorista australiano sin el efecto de los picos mensuales. # Promedios móviles (SMA / EMA) y análisis de tendencia === library(dplyr) library(tidyr) library(zoo) library(ggplot2) library(knitr) # 1. Calcular SMA y EMA EMA_classic &lt;- function(x, n){ alpha &lt;- 2/(n + 1) y &lt;- rep(NA_real_, length(x)) idx &lt;- which(!is.na(x)) if(length(idx) == 0) return(y) y[idx[1]] &lt;- x[idx[1]] for(i in idx[-1]) y[i] &lt;- alpha * x[i] + (1 - alpha) * y[i - 1] y } k_short &lt;- 6 # EMA(6) k_long &lt;- 12 # SMA(12) df &lt;- df %&gt;% mutate( `Nivel` = valor, `SMA (12m)` = zoo::rollmean(valor, k_long, fill = NA, align = &quot;right&quot;), `EMA (6m)` = EMA_classic(valor, k_short) ) #2. Tabla de parámetros param_tbl &lt;- data.frame( check.names = FALSE, `Ventana corta (EMA 6m)` = paste(k_short, &quot;meses&quot;), `Ventana larga (SMA 12m)` = paste(k_long, &quot;meses&quot;), `Tipo de suavizamiento` = &quot;Media móvil simple (SMA) y exponencial (EMA)&quot; ) kable( param_tbl, caption = &quot;Tabla 3. Parámetros utilizados para el cálculo de promedios móviles.&quot;, align = &quot;c&quot; ) Table 3.4: Tabla 3. Parámetros utilizados para el cálculo de promedios móviles. Ventana corta (EMA 6m) Ventana larga (SMA 12m) Tipo de suavizamiento 6 meses 12 meses Media móvil simple (SMA) y exponencial (EMA) # 3. Preparar datos largos para ggplot df_long &lt;- df %&gt;% select(fecha, `Nivel`, `SMA (12m)`, `EMA (6m)`) %&gt;% pivot_longer(-fecha, names_to = &quot;Serie&quot;, values_to = &quot;valor&quot;) df_long$Serie &lt;- factor(df_long$Serie, levels = c(&quot;Nivel&quot;, &quot;SMA (12m)&quot;, &quot;EMA (6m)&quot;)) colores &lt;- c(&quot;Nivel&quot; = &quot;#0072B2&quot;, &quot;SMA (12m)&quot; = &quot;#009E73&quot;, &quot;EMA (6m)&quot; = &quot;#D55E00&quot;) linetypes &lt;- c(&quot;Nivel&quot; = &quot;solid&quot;, &quot;SMA (12m)&quot; = &quot;solid&quot;, &quot;EMA (6m)&quot; = &quot;dashed&quot;) # 4. Figura comparativa ggplot(df_long, aes(x = fecha, y = valor, color = Serie, linetype = Serie)) + geom_line(linewidth = 0.9, alpha = 0.9, na.rm = TRUE) + scale_color_manual(values = colores) + scale_linetype_manual(values = linetypes) + labs( title = &quot;Figura 2. Tendencia suavizada — Nivel, SMA(12) y EMA(6)&quot;, x = &quot;Año&quot;, y = &quot;Turnover (millones de AUD)&quot;, color = &quot;Serie&quot;, linetype = &quot;Serie&quot; ) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333333&quot;), plot.subtitle = element_text(color = &quot;#555555&quot;, size = 10), axis.title.y = element_text(color = &quot;#0072B2&quot;, face = &quot;bold&quot;), legend.position = &quot;top&quot;, legend.title = element_text(face = &quot;bold&quot;), panel.border = element_rect(color = &quot;#cccccc&quot;) ) El análisis de promedios móviles permite suavizar la serie temporal y revelar la tendencia subyacente del comercio minorista australiano. Para este caso, se calcularon dos medidas de suavizamiento complementarias: SMA (12 meses): promedio móvil simple de un año, que elimina gran parte de las fluctuaciones mensuales. EMA (6 meses): promedio móvil exponencial de medio año, que asigna mayor peso a los valores recientes. La Tabla 3 resume los parámetros de cada método. La Figura 2 muestra la comparación entre la serie original y las versiones suavizadas, utilizando colores diferenciados La figura evidencia una tendencia ascendente sostenida en el volumen de ventas minoristas entre 1982 y 2024. La SMA (12) (línea verde) muestra un crecimiento continuo con leves pausas durante crisis económicas, mientras que la EMA (6) (línea naranja) capta con mayor sensibilidad las desaceleraciones o repuntes de corto plazo. Ambos métodos confirman que la serie presenta una fuerte no estacionaridad en nivel, producto del crecimiento estructural del comercio. Los promedios móviles son una herramienta fundamental para distinguir la tendencia general de la variabilidad estacional. Este resultado establece la base para los siguientes análisis, donde se abordará la estacionalidad y la autocorrelación temporal para identificar los patrones cíclicos que caracterizan la serie. 3.5 Estacionalidad y rezagos (seasonplot, subseries, ACF y descomposición) En una serie temporal, la estacionalidad se refiere a los patrones que se repiten a intervalos regulares, como meses, trimestres o años. Estos ciclos son producto de comportamientos periódicos (por ejemplo, aumentos de ventas en diciembre o caídas en enero). Fórmulas Modelo aditivo: \\[ Y_t = T_t + S_t + R_t \\] Modelo multiplicativo: \\[ Y_t = T_t \\times S_t \\times R_t \\] Estimación de la tendencia (promedio móvil centrado): \\[ T_t = \\frac{1}{m} \\sum_{i=-k}^{k} Y_{t+i} \\] Índices estacionales promedio (modelo aditivo): \\[ S_m = \\frac{1}{n} \\sum_{j=1}^{n} (Y_{m,j} - T_{m,j}) \\] Índices estacionales promedio (modelo multiplicativo): \\[ S_m = \\frac{1}{n} \\sum_{j=1}^{n} \\frac{Y_{m,j}}{T_{m,j}} \\] Recomposición (modelo aditivo): \\[ \\hat{Y}_t = \\hat{T}_t + \\hat{S}_t \\] Recomposición (modelo multiplicativo): \\[ \\hat{Y}_t = \\hat{T}_t \\times \\hat{S}_t \\] En el Retail Turnover Australia, se observa un patrón anual (m = 12), con picos en noviembre–diciembre y descensos en enero–febrero. Para analizarlo: Se genera el Seasonplot (Figura 3) para visualizar la periodicidad. Se utiliza la ACF (Autocorrelación) para confirmar que los picos se repiten cada 12 rezagos. Se aplica la descomposición STL para separar tendencia, estacionalidad y residuo. # Estacionalidad y rezagos === suppressPackageStartupMessages({ if (!requireNamespace(&quot;forecast&quot;, quietly = TRUE)) install.packages(&quot;forecast&quot;) library(forecast) # ggseasonplot, ggsubseriesplot, ggAcf library(dplyr); library(tidyr); library(ggplot2); library(knitr); library(lubridate) }) # Asegurar objeto ts_y (mensual) stopifnot(exists(&quot;ts_y&quot;), is.ts(ts_y), frequency(ts_y) == 12) # ---------- Seasonplot: mismo mes a través de los años ---------- df_season &lt;- tibble( fecha = as.Date(time(ts_y), origin = &quot;1970-01-01&quot;), valor = as.numeric(ts_y), anio = year(as.Date(time(ts_y), origin = &quot;1970-01-01&quot;)), mes = factor(month(as.Date(time(ts_y), origin = &quot;1970-01-01&quot;), label = TRUE, abbr = TRUE), ordered = TRUE) ) # Figura 3 (versión completa: todas las curvas) # Esta versión es intencionalmente &#39;cargada&#39; para mostrar el problema de legibilidad. p_season_full &lt;- ggplot(df_season, aes(x = mes, y = valor, group = anio)) + geom_line(color = &quot;#7f7f7f&quot;, alpha = 0.35) + labs(title = &quot;Figura 3. Estacionalidad anual — todas las curvas por año&quot;, subtitle = &quot;Versión ilustrativa: la superposición de ~40 años dificulta la lectura del patrón&quot;, x = &quot;Mes del año&quot;, y = &quot;Turnover (millones de AUD)&quot;) + theme_light(base_size = 11) + theme(plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), panel.border = element_rect(color = &quot;#ccc&quot;)) print(p_season_full) # Figura 3A (últimos 10 años) ult10 &lt;- (max(df_season$anio) - 9):max(df_season$anio) p_season_10 &lt;- ggplot(filter(df_season, anio %in% ult10), aes(x = mes, y = valor, group = anio, color = factor(anio))) + geom_line(linewidth = 0.8, alpha = 0.9) + scale_color_viridis_d(name = &quot;Año&quot;, option = &quot;C&quot;, end = 0.9) + labs(title = &quot;Figura 3A. Estacionalidad — últimos 10 años&quot;, subtitle = &quot;Comparación clara de perfiles mensuales (solo la década reciente)&quot;, x = &quot;Mes del año&quot;, y = &quot;Turnover (millones de AUD)&quot;) + theme_bw(base_size = 11) + theme(plot.title = element_text(face = &quot;bold&quot;), panel.border = element_rect(color = &quot;#ccc&quot;)) print(p_season_10) # Figura 3B (por década: promedio + último año destacado) df_dec &lt;- df_season %&gt;% mutate(decada = paste0(floor(anio/10)*10, &quot;s&quot;)) mean_dec &lt;- df_dec %&gt;% group_by(decada, mes) %&gt;% summarise(prom = mean(valor, na.rm = TRUE), .groups = &quot;drop&quot;) anio_reciente &lt;- max(df_dec$anio) p_season_dec &lt;- ggplot(df_dec, aes(mes, valor, group = anio)) + geom_line(alpha = 0.25, color = &quot;#7f7f7f&quot;) + # años de la década geom_line(data = mean_dec, aes(mes, prom, group = 1), # promedio década color = &quot;#0072B2&quot;, linewidth = 1.1) + geom_line(data = subset(df_dec, anio == anio_reciente), # último año color = &quot;#D55E00&quot;, linewidth = 1.1) + facet_wrap(~ decada, ncol = 2, scales = &quot;free_y&quot;) + labs(title = &quot;Figura 3B. Estacionalidad por década&quot;, subtitle = &quot;Gris: años de la década | Azul: promedio mensual | Naranja: último año disponible&quot;, x = &quot;Mes del año&quot;, y = &quot;Turnover (millones de AUD)&quot;) + theme_light(base_size = 11) + theme(plot.title = element_text(face = &quot;bold&quot;), strip.background = element_rect(fill = &quot;#f2f2f2&quot;), panel.border = element_rect(color = &quot;#ccc&quot;)) print(p_season_dec) # Subseries: promedio por mes (facetas) p_subseries &lt;- ggsubseriesplot(ts_y) + labs( title = &quot;Figura 4. Subseries mensuales: patrón promedio por mes&quot;, subtitle = &quot;Cada panel muestra la serie del mes a través del tiempo y su promedio&quot;, x = &quot;Año&quot;, y = &quot;Turnover (millones de AUD)&quot; ) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), plot.subtitle = element_text(size = 10, color = &quot;#555&quot;), axis.title.y = element_text(color = &quot;#0072B2&quot;, face = &quot;bold&quot;), panel.border = element_rect(color = &quot;#ccc&quot;) ) print(p_subseries) # ACF: autocorrelación (rezagos) p_acf &lt;- ggAcf(ts_y) + labs( title = &quot;Figura 5. Autocorrelación (ACF) de la serie&quot;, subtitle = &quot;Picos en rezagos múltiples de 12 meses confirman estacionalidad anual&quot;, x = &quot;Rezago (meses)&quot;, y = &quot;Correlación&quot; ) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), plot.subtitle = element_text(size = 10, color = &quot;#555&quot;), panel.border = element_rect(color = &quot;#ccc&quot;) ) print(p_acf) # Descomposición (STL robusta) ts_df &lt;- tibble(fecha = as.Date(time(ts_y), origin = &quot;1970-01-01&quot;), valor = as.numeric(ts_y)) # STL en base a ts (monthly) fit_stl &lt;- stl(ts_y, s.window = &quot;periodic&quot;, robust = TRUE) autoplot(fit_stl) + labs( title = &quot;Figura 6. Descomposición STL: tendencia, estacionalidad y residuo&quot;, subtitle = &quot;STL robusta con estacionalidad periódica (mensual)&quot;, x = &quot;Tiempo&quot; ) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), plot.subtitle = element_text(size = 10, color = &quot;#555&quot;), panel.border = element_rect(color = &quot;#ccc&quot;) ) # Tabla: medias por mes y ranking mes_tbl &lt;- ts_df |&gt; mutate(mes = month(fecha, label = TRUE, abbr = TRUE)) |&gt; group_by(mes) |&gt; summarize(`Promedio mensual` = round(mean(valor, na.rm = TRUE), 1), .groups = &quot;drop&quot;) |&gt; arrange(desc(`Promedio mensual`)) knitr::kable( mes_tbl, caption = &quot;Tabla 5. Promedio del turnover por mes (ranking descendente).&quot;, align = &quot;c&quot; ) Table 3.5: Tabla 5. Promedio del turnover por mes (ranking descendente). mes Promedio mensual dic 33143.2 nov 26772.7 oct 26062.2 ago 24837.4 mar 24829.2 ene 24828.7 sept 24802.0 jul 24695.7 may 24567.0 jun 24084.3 abr 23748.0 feb 22635.9 Seasonplot (Figura 3) El gráfico estacional traza, para cada año, la evolución a lo largo de los 12 meses. Se observa un patrón altamente repetitivo: incrementos hacia el cierre de año y caídas posteriores, evidencia clara de estacionalidad mensual. La superposición de curvas similares entre años indica que el patrón es estable y persistente. Para evitar la sobrecarga visual del seasonplot con todos los años, se presentan dos vistas complementarias: Figura 3A (últimos 10 años): la estacionalidad reciente es nítida; se mantiene el pico en noviembre–diciembre y la caída en enero–febrero. Figura 3B (facetas por década): el promedio mensual de cada década (línea azul) confirma la estabilidad del patrón anual, mientras que la curva del último año (naranja) permite contrastar el presente con su contexto histórico. La serie exhibe estacionalidad anual fuerte y persistente con máximos en los meses de cierre de año. Subseries mensuales (Figura 4) Las subseries muestran cada mes como una serie independiente en el tiempo, junto con su promedio. Los paneles permiten identificar qué meses presentan niveles sistemáticamente altos (p. ej., noviembre–diciembre) y cuáles tienden a ser bajos (p. ej., enero–febrero). Esto refuerza la lectura del seasonplot con una visión mes a mes. Autocorrelación (Figura 5) La ACF exhibe picos significativos en rezagos de 12, 24, 36… meses, lo cual confirma formalmente la estacionalidad anual. Además, la persistencia de autocorrelación en rezagos cortos indica que la serie no es ruido blanco y posee memoria (dependencia temporal). Descomposición STL (Figura 6) La descomposición STL separa la serie en tendencia, estacionalidad y residuo. La tendencia muestra el crecimiento estructural de largo plazo. La estacionalidad mensual es marcada y relativamente estable. El residuo concentra la variación no explicada (shocks específicos, ruido). La Tabla 5 resume el promedio histórico por mes y lo ordena de mayor a menor, facilitando referenciar los picos estacionales en el texto. La combinación de seasonplot, subseries, ACF y STL confirma que la serie presenta tendencia creciente y estacionalidad anual fuerte. Estos hallazgos orientan las transformaciones para el modelado: diferenciación regular (Δ) para estabilizar tendencia y, de ser necesario, diferenciación estacional (Δ₁₂) para remover el componente mensual antes de ajustes ARIMA/ETS. 3.6 Diferencias Δ y Δ₁₂ (rezagos y estabilización) El proceso de diferenciación busca eliminar la tendencia y la estacionalidad de una serie temporal, con el fin de obtener estacionariedad (una serie con media y varianza constantes a lo largo del tiempo). Existen dos tipos de diferencias: Diferencia regular (Δ): elimina la tendencia. Diferencia estacional (Δ12): elimina la estacionalidad anual (para frecuencia mensual). Fórmula Diferencia regular (Δ): \\[ \\Delta Y_t = Y_t - Y_{t-1} \\] Diferencia estacional (Δ₁₂): \\[ \\Delta_{12} Y_t = Y_t - Y_{t-12} \\] Doble diferencia combinada (ΔΔ₁₂): \\[ \\Delta \\Delta_{12} Y_t = (Y_t - Y_{t-1}) - (Y_{t-12} - Y_{t-13}) \\] Operador de diferencia general: \\[ \\nabla^d Y_t = (1 - B)^d Y_t \\] En el Retail Turnover Australia: La diferencia regular (Δ) reduce la tendencia. La diferencia estacional (Δ12) elimina el patrón anual. La combinación ΔΔ12 produce una serie estacionaria, adecuada para modelar con ARIMA o SARIMA. Nuestro objetivo es mostrar cómo la primera diferencia (Δ) y la diferencia estacional (Δ₁₂) remueven tendencia y estacionalidad, respectivamente, y comprobarlo visualmente y con ACF. #Diferencias Δ y Δ₁₂ library(ggplot2); library(dplyr); library(forecast); library(knitr) # 6.1 Construcción de diferencias ts_d1 &lt;- diff(ts_y, lag = 1) # Δ x_t = x_t - x_{t-1} ts_d12 &lt;- diff(ts_y, lag = 12) # Δ₁₂ x_t = x_t - x_{t-12} ts_d1d12 &lt;- diff(ts_d12, lag = 1) # Δ(Δ₁₂ x_t) -&gt; candidata a estacionaria # Pasar a data.frames para graficar con ggplot as_df &lt;- function(z) data.frame( fecha = as.Date(time(z), origin = &quot;1970-01-01&quot;), valor = as.numeric(z) ) df_d1 &lt;- as_df(ts_d1) df_d12 &lt;- as_df(ts_d12) df_d1d12 &lt;- as_df(ts_d1d12) # 6.2 Figuras de las diferencias g_base &lt;- function(dat, titulo, subtit, ylab){ ggplot(dat, aes(fecha, valor)) + geom_line(color = &quot;#0072B2&quot;, linewidth = 0.6) + labs(title = titulo, subtitle = subtit, x = &quot;Tiempo&quot;, y = ylab) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), plot.subtitle = element_text(size = 10, color = &quot;#555&quot;), axis.title.y = element_text(color = &quot;#0072B2&quot;, face = &quot;bold&quot;), panel.border = element_rect(color = &quot;#ccc&quot;) ) } print(g_base(df_d1, &quot;Figura 7. Primera diferencia (Δ)&quot;, &quot;Elimina gran parte de la tendencia (serie con media más estable).&quot;, expression(Delta~x[t]))) print(g_base(df_d12, &quot;Figura 8. Diferencia estacional (Δ₁₂)&quot;, &quot;Elimina el patrón anual repetitivo (estacionalidad).&quot;, expression(Delta[12]~x[t]))) print(g_base(df_d1d12, &quot;Figura 9. Diferencia combinada Δ·Δ₁₂&quot;, &quot;Primero diferencia estacional, luego primera diferencia → candidata a estacionaria.&quot;, expression(Delta~Delta[12]~x[t]))) # 6.3 ACF de las diferencias (para confirmar) acf_pl &lt;- function(z, titulo){ ggAcf(z) + labs(title = titulo, x = &quot;Rezago (meses)&quot;, y = &quot;Correlación&quot;) + theme_bw(base_size = 11) + theme( plot.title = element_text(face = &quot;bold&quot;, size = 13, color = &quot;#333&quot;), panel.border = element_rect(color = &quot;#ccc&quot;) ) } print(acf_pl(ts_d1, &quot;Figura 10. ACF de Δ&quot;)) print(acf_pl(ts_d12, &quot;Figura 11. ACF de Δ₁₂&quot;)) print(acf_pl(ts_d1d12,&quot;Figura 12. ACF de Δ·Δ₁₂&quot;)) # 6.4 (Opcional) Mini-tabla de varianzas para mostrar estabilización stab_tbl &lt;- data.frame( Serie = c(&quot;Nivel&quot;, &quot;Δ&quot;, &quot;Δ₁₂&quot;, &quot;Δ·Δ₁₂&quot;), Varianza = round(c(var(ts_y, na.rm=TRUE), var(ts_d1, na.rm=TRUE), var(ts_d12, na.rm=TRUE), var(ts_d1d12, na.rm=TRUE)), 2) ) knitr::kable(stab_tbl, caption = &quot;Tabla 6. Varianza por transformación: evidencia de estabilización tras diferenciar.&quot;, align = &quot;c&quot;) Table 3.6: Tabla 6. Varianza por transformación: evidencia de estabilización tras diferenciar. Serie Varianza Nivel 195743309.0 Δ 11128031.5 Δ₁₂ 505792.5 Δ·Δ₁₂ 379212.2 Δ (Figura 7): remueve la tendencia, acercando la serie a media estable, aunque mantiene restos estacionales. Δ₁₂ (Figura 8): remueve la estacionalidad anual (patrón de 12 meses), pero aún puede persistir una deriva de largo plazo. Δ·Δ₁₂ (Figura 9): combinando ambas se obtiene una serie candidata a estacionaria; las ACF (Figuras 10–12) muestran que los picos estacionales se reducen drásticamente y la dependencia a largo plazo se atenúa. Tabla 6: la varianza disminuye tras diferenciar, lo que apoya la estabilización. Para modelar esta serie con enfoques ARIMA estacionales, una especificación (d = 1, D = 1, m = 12) es un punto de partida razonable, sujeto a verificación con diagnósticos formales (AICc, pruebas de raíz unitaria y residuales del modelo). 3.7 Conclusiones unidad 2 El análisis exploratorio de la serie mensual Australia Monthly Retail Turnover (1982–2024) permitió caracterizar su comportamiento histórico mediante técnicas gráficas y estadísticas que revelan su estructura temporal y estacional. Identificación del patrón general A partir de los promedios móviles (SMA(12) y EMA(6)), se observó una tendencia creciente sostenida en el volumen de ventas minoristas, con incrementos marcados desde mediados de los años noventa y aceleraciones notorias a partir de 2010. Esta tendencia indica un crecimiento estructural del comercio minorista australiano, vinculado al aumento del consumo y la expansión económica. Estructura estacional El análisis mediante seasonplot, subseries y promedios mensuales mostró un patrón estacional anual fuerte y estable, con picos de ventas en noviembre–diciembre (época de fin de año) y caídas en enero–febrero. Este comportamiento fue confirmado estadísticamente mediante la función de autocorrelación (ACF), con picos significativos en múltiplos de 12 rezagos. Descomposición y componentes La descomposición STL robusta separó la serie en sus tres componentes principales: Tendencia: crecimiento constante en el largo plazo. Estacionalidad: patrón mensual repetitivo. Residuo: fluctuaciones irregulares atribuibles a choques económicos o eventos específicos. Los componentes de tendencia y estacionalidad resultaron dominantes, lo cual evidenció la necesidad de aplicar transformaciones previas al modelado. Preprocesamiento para el modelado El proceso de diferenciación regular y estacional (Δ y Δ₁₂) permitió estabilizar la serie al eliminar la tendencia y la estacionalidad, logrando una estructura más adecuada para el ajuste de modelos ARIMA estacionales (SARIMA). Este paso constituye la base del preprocesamiento y visualización abordado en la Unidad 3. "],["unidad-3-preprocesamiento-y-visualización.html", "4 Unidad 3: Preprocesamiento y visualización 4.1 Transformación Box-Cox + Descomposición STL 4.2 Fuerza estacional + recomendaciones de diferenciación 4.3 Doble diferenciación (regular y estacional) 4.4 Prueba ADF antes/después 4.5 Validación visual: ACF y PACF 4.6 Conclusiones unidad 3 4.7 Referencias", " 4 Unidad 3: Preprocesamiento y visualización En esta unidad se continúa el análisis desarrollado en la Unidad 2, profundizando en las etapas de preprocesamiento de datos y visualización aplicadas a la serie mensual Australia Monthly Retail Turnover (1982–2024). El objetivo es garantizar que la serie cumpla con las condiciones necesarias para su posterior modelado, particularmente en la identificación de componentes estructurales y la estabilización de la varianza y la media. A través de técnicas estadísticas y gráficas, se analizan nuevamente los patrones de tendencia y estacionalidad, la descomposición de la serie y las transformaciones requeridas para alcanzar la estacionariedad, utilizando funciones de diferenciación regular y estacional (Δ y Δ₁₂). Estas operaciones forman parte esencial del preprocesamiento, al eliminar dependencias sistemáticas y preparar la información para la estimación de modelos ARIMA estacionales (SARIMA). El proceso descrito integra la manipulación de datos, la verificación de supuestos y la interpretación visual como base para la comprensión del comportamiento temporal de las ventas minoristas australianas, asegurando una estructura adecuada y confiable para las fases siguientes de modelado y validación. suppressPackageStartupMessages({ library(forecast); library(tseries); library(ggplot2) library(knitr); library(kableExtra) }) # Estilos gg_std &lt;- theme_minimal(base_size = 11) + theme( plot.title.position = &quot;plot&quot;, plot.title = element_text(face = &quot;bold&quot;), plot.subtitle = element_text(color = &quot;grey30&quot;), panel.grid.minor = element_blank() ) kbl_std &lt;- function(df, caption = NULL, digits = 3) { knitr::kable(df, caption = caption, align = &quot;c&quot;, digits = digits) |&gt; kableExtra::kable_styling(full_width = FALSE, bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) } 4.1 Transformación Box-Cox + Descomposición STL La transformación Box–Cox se utiliza para estabilizar la varianza y mejorar la normalidad de una serie temporal antes del modelado. Fórmula: \\[ Y&#39;_t = \\begin{cases} \\frac{Y_t^{\\lambda} - 1}{\\lambda}, &amp; \\text{si } \\lambda \\neq 0 \\\\ \\ln(Y_t), &amp; \\text{si } \\lambda = 0 \\end{cases} \\]  es el valor original de la serie,  es la serie transformada,  es el parámetro que controla el grado de transformación (estimado con BoxCox.lambda()). Interpretación práctica: Si ≈1, no es necesaria la transformación. Si &lt;1, se recomienda aplicar la transformación (reduce la dispersión). La descomposición STL permite expresar una serie temporal como la suma de tres componentes: \\[Y_t = T_t + S_t + R_t\\] donde:  es la tendencia,  la estacionalidad,  el residuo o componente irregular. El método STL aplica suavizamiento LOESS para estimar cada componente, permitiendo manejar estacionalidad no constante y valores atípicos. El propósito es separar los efectos estructurales (tendencia y estacionalidad) de los componentes aleatorios, facilitando el análisis de estacionariedad. stopifnot(exists(&quot;ts_y&quot;), is.ts(ts_y), frequency(ts_y) == 12) lambda_bc &lt;- BoxCox.lambda(ts_y) usar_bc &lt;- abs(lambda_bc - 1) &gt; 0.1 cat(&quot;λ (Box-Cox) estimado:&quot;, round(lambda_bc, 3), &quot;\\n&quot;) ## λ (Box-Cox) estimado: 0.196 cat(&quot;¿Aplicar transformación? &quot;, ifelse(usar_bc, &quot;Sí (|λ−1|&gt;0.1)&quot;, &quot;No (λ≈1)&quot;), &quot;\\n&quot;) ## ¿Aplicar transformación? Sí (|λ−1|&gt;0.1) serie_bc &lt;- if (usar_bc) BoxCox(ts_y, lambda_bc) else ts_y stl_obj &lt;- stl(serie_bc, s.window = &quot;periodic&quot;, robust = TRUE) print( autoplot(stl_obj) + labs( title = &quot;Figura 13. Descomposición STL de la serie mensual&quot;, subtitle = if (usar_bc) paste0(&quot;Aplicando transformación Box–Cox (λ = &quot;, round(lambda_bc,3), &quot;)&quot;) else &quot;Sin transformación Box–Cox&quot;, x = &quot;Tiempo&quot;, y = NULL ) + gg_std ) if (usar_bc) { # Crear tabla de varianzas con formato numérico y sin notación científica var_tbl &lt;- data.frame( Serie = c(&quot;Original&quot;, paste0(&quot;Box-Cox (lambda = &quot;, round(lambda_bc, 3), &quot;)&quot;)), Varianza = formatC( c(var(ts_y, na.rm = TRUE), var(serie_bc, na.rm = TRUE)), format = &quot;f&quot;, digits = 2, big.mark = &quot;,&quot; ) ) knitr::kable( var_tbl, caption = &quot;Tabla 7. Comparación de varianzas: original vs transformada (criterio de estabilización).&quot;, align = &quot;c&quot;, booktabs = TRUE ) %&gt;% kableExtra::kable_styling( full_width = FALSE, position = &quot;center&quot;, bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;) ) } Table 4.1: Table 4.2: Tabla 7. Comparación de varianzas: original vs transformada (criterio de estabilización). Serie Varianza Original 195,743,308.97 Box-Cox (lambda = 0.196) 18.20 Figura 13. Descomposición STL de la serie mensual La descomposición STL (con transformación Box–Cox, λ = 0.196) permite analizar la estructura interna de la serie mensual Australia Monthly Retail Turnover y distinguir sus componentes principales: Data (serie original transformada): muestra un comportamiento creciente a lo largo del tiempo, lo que confirma la presencia de una tendencia positiva estructural en las ventas minoristas australianas. Trend (tendencia): evidencia un incremento sostenido, especialmente a partir del año 2000, reflejando el crecimiento económico y la expansión del consumo en el país. Seasonal (estacionalidad): presenta un patrón cíclico muy regular y estable, con picos pronunciados en los meses de noviembre y diciembre (temporada alta por fin de año) y caídas en enero–febrero. Remainder (residuo): agrupa las fluctuaciones irregulares no explicadas por los componentes sistemáticos, asociadas a choques económicos o cambios coyunturales del mercado. Tabla 7. Comparación de varianzas: original vs transformada La varianza de la serie se redujo drásticamente tras aplicar la transformación Box–Cox, pasando de aproximadamente 1.96×10⁸ a 18.2. Esto indica que la transformación logró estabilizar la variabilidad de la serie, uno de los requisitos para que el modelo ARIMA (o SARIMA) funcione correctamente. La estimación del parámetro λ = 0.196 confirma que una transformación de tipo raíz o logarítmica era necesaria para homogeneizar la escala de las observaciones. La aplicación de la transformación Box–Cox fue justificada y efectiva, ya que permitió controlar la heterocedasticidad (varianza no constante) y dejar la serie en condiciones más adecuadas para el análisis de estacionariedad y la posterior estimación del modelo SARIMA. 4.2 Fuerza estacional + recomendaciones de diferenciación La fuerza de estacionalidad cuantifica qué tan dominante es el componente estacional frente a la variación total de la serie. Se calcula a partir de la descomposición STL mediante la siguiente fórmula: \\[F_s = 1 - \\frac{Var(R_t)}{Var(S_t + R_t)}\\] suppressPackageStartupMessages({ library(forecast); library(knitr); library(kableExtra) }) # --- Fuerza de estacionalidad (a partir del STL ya calculado) --- stopifnot(exists(&quot;stl_obj&quot;), exists(&quot;serie_bc&quot;)) comp &lt;- stl_obj$time.series var_r &lt;- var(comp[, &quot;remainder&quot;], na.rm = TRUE) var_sr &lt;- var(comp[, &quot;seasonal&quot;] + comp[, &quot;remainder&quot;], na.rm = TRUE) fuerza_est &lt;- max(0, 1 - var_r/var_sr) # 0 a 1 (mayor = estacionalidad más fuerte) # --- Recomendaciones automáticas de diferencias (regular y estacional) --- d_rec &lt;- ndiffs(serie_bc, alpha = 0.05, test = &quot;adf&quot;) D_rec &lt;- nsdiffs(serie_bc, m = 12) # --- Tabla 8: estacionalidad y recomendaciones --- tab8 &lt;- data.frame( Indicador = c(&quot;Fuerza de estacionalidad (0–1)&quot;, &quot;d recomendado&quot;, &quot;D recomendado (m=12)&quot;), Valor = c(round(fuerza_est, 3), d_rec, D_rec) ) knitr::kable( tab8, caption = &quot;Tabla 8. Medida de estacionalidad y recomendaciones de diferenciación.&quot;, align = &quot;c&quot;, booktabs = TRUE ) |&gt; kableExtra::kable_styling(full_width = FALSE, position = &quot;center&quot;, bootstrap_options = c(&quot;striped&quot;,&quot;hover&quot;,&quot;condensed&quot;)) Table 4.3: Table 4.4: Tabla 8. Medida de estacionalidad y recomendaciones de diferenciación. Indicador Valor Fuerza de estacionalidad (0–1) 0.968 d recomendado 1.000 D recomendado (m=12) 1.000 De acuerdo a los resultados de la Tabla 8 La fuerza estacional elevada (0.968) y las recomendaciones =1y =1 confirman que la serie Australia Monthly Retail Turnover presenta una estructura estacional dominante y una tendencia creciente, por lo que es necesario aplicar una doble diferenciación (regular y estacional). Esto garantiza que la serie cumpla con el supuesto de estacionariedad requerido para la estimación del modelo SARIMA(p,d,q)(P,D,Q)[12] en la siguiente unidad. 4.3 Doble diferenciación (regular y estacional) EL objetivo es remover tendencia y patrón estacional para lograr estacionariedad. Fórmulas: Diferencia regular: \\[\\nabla Y_t = Y_t - Y_{t-1}\\] Diferencia estacional (m=12): \\[\\nabla_{12} Y_t = Y_t - Y_{t-12}\\] Combinada (aplicando primero estacional y luego regular): \\[\\nabla \\nabla_{12} Y_t = (Y_t - Y_{t-12}) - (Y_{t-1} - Y_{t-13})\\] En esta unidad usamos los órdenes recomendados: d = 1 y D = 1. stopifnot(exists(&quot;serie_bc&quot;)) # Serie (posiblemente Box–Cox) y freq=12 d_rec &lt;- 1L D_rec &lt;- 1L y_diff &lt;- serie_bc if (D_rec &gt; 0) y_diff &lt;- diff(y_diff, lag = 12, differences = D_rec) if (d_rec &gt; 0) y_diff &lt;- diff(y_diff, differences = d_rec) # Figura 14. Serie transformada y doblemente diferenciada (Δ·Δ12) print( autoplot(y_diff) + labs( title = &quot;Figura 14. Serie transformada y diferenciada (Δ·Δ₁₂)&quot;, subtitle = &quot;Ordenes aplicados: d = 1, D = 1 (m = 12)&quot;, x = &quot;Tiempo&quot;, y = &quot;Escala transformada&quot; ) + gg_std ) En la Figura 14 vemos que después de aplicar las diferencias regular (=1) y estacional (D=1,m=12), la serie Australia Monthly Retail Turnover muestra un comportamiento claramente distinto al de la versión original. La serie se oscila alrededor de la media cero, lo que sugiere que la tendencia fue eliminada. La varianza se mantiene relativamente constante a lo largo del tiempo, indicando que el proceso de diferenciación logró estabilizar la escala. Los picos irregulares observados alrededor del año 2000 podrían corresponder a eventos económicos puntuales (choques transitorios), pero no reflejan una tendencia sistemática. No se aprecian patrones cíclicos definidos ni repetitivos, lo que evidencia que la estacionalidad fue removida con éxito. 4.4 Prueba ADF antes/después El objetivo es evidenciar estacionariedad tras la doble diferenciación. Modelo (forma común de la ADF): \\[\\Delta Y_t = \\alpha + \\beta t + \\gamma Y_{t-1} + \\sum_{i=1}^{p}\\phi_i \\, \\Delta Y_{t-i} + \\varepsilon_t\\] Hipótesis: \\[H_0: \\gamma = 0 \\quad (\\text{raíz unitaria, no estacionaria}) \\qquad H_1: \\gamma &lt; 0 \\quad (\\text{estacionaria})\\] Criterio: p-value &lt; 0.05 → evidencia de estacionariedad. suppressPackageStartupMessages({ library(tseries); library(knitr); library(kableExtra) }) adf_before &lt;- adf.test(serie_bc) adf_after &lt;- adf.test(na.omit(y_diff)) # Crear tabla tab9 &lt;- data.frame( `Etapa` = c(&quot;Antes (serie usada en STL)&quot;, &quot;Después de $\\\\Delta·\\\\Delta_{12}$&quot;), `p-value ADF` = formatC(c(adf_before$p.value, adf_after$p.value), format = &quot;f&quot;, digits = 3), `Estacionaria` = c(adf_before$p.value &lt; 0.05, adf_after$p.value &lt; 0.05) ) knitr::kable( tab9, caption = &quot;Tabla 9. Prueba ADF antes y después de la doble diferenciación.&quot;, align = &quot;c&quot;, booktabs = TRUE, escape = FALSE ) |&gt; kableExtra::kable_styling(full_width = FALSE, position = &quot;center&quot;, bootstrap_options = c(&quot;striped&quot;,&quot;hover&quot;,&quot;condensed&quot;)) Table 4.5: Table 4.6: Tabla 9. Prueba ADF antes y después de la doble diferenciación. Etapa p.value.ADF Estacionaria Antes (serie usada en STL) 0.010 TRUE Después de \\(\\Delta·\\Delta_{12}\\) 0.010 TRUE En la Tabla 9 podemos apreciar que en ambos casos el p-value (0.01) es menor que 0.05, por lo que se rechaza la hipótesis nula (H₀) de raíz unitaria. Esto significa que tanto la serie transformada con Box–Cox como la doblemente diferenciada son estacionarias en términos de media y varianza. Sin embargo, el resultado “TRUE” en ambas etapas puede deberse a que el Box–Cox ya estabilizó gran parte de la varianza, y la doble diferenciación terminó de eliminar la tendencia residual y los ciclos anuales. La prueba ADF confirma que la serie procesada cumple con el supuesto de estacionariedad, lo cual valida el preprocesamiento y permite avanzar al análisis de autocorrelaciones (ACF/PACF) para determinar los órdenes del modelo SARIMA(p,d,q)(P,D,Q)[12]. 4.5 Validación visual: ACF y PACF Objetivo: verificar la estacionariedad y la estructura de correlación temporal en la serie diferenciada. La función de autocorrelación (ACF) mide la relación entre valores separados por un rezago k: \\[\\rho_k = \\frac{\\text{Cov}(Y_t, Y_{t-k})}{\\text{Var}(Y_t)}\\] donde: \\(\\rho_k\\) es el coeficiente de autocorrelación en el rezago k, \\(Y_t\\) es el valor de la serie en el tiempo t. En una serie estacionaria, la ACF decae rápidamente hacia cero y no muestra patrones sistemáticos. La autocorrelación parcial (PACF) mide la correlación directa entre \\(Y_t\\) y \\(Y_{t-k}\\), eliminando los efectos de los rezagos intermedios.Ambas funciones ayudan a: - Confirmar la estacionariedad de la serie diferenciada. - Sugerir los órdenes (p, q) y (P, Q) para el modelo SARIMA. Acf(na.omit(y_diff), main = &quot;Figura 15. Función de Autocorrelación (ACF) - Serie diferenciada Δ·Δ₁₂&quot;) # Figura 16. PACF de la serie Δ·Δ₁₂ Pacf(na.omit(y_diff), main = &quot;Figura 16. Función de Autocorrelación Parcial (PACF) - Serie diferenciada Δ·Δ₁₂&quot;) Figura 15. Función de Autocorrelación (ACF) La función de autocorrelación de la serie diferenciada (Δ·Δ₁₂) muestra una rápida caída de las correlaciones después de los primeros rezagos, lo que indica que no existe dependencia temporal prolongada. Los picos en los primeros lags son bajos y dentro del intervalo de confianza (líneas azules), lo que confirma que no hay estructura de tendencia ni estacionalidad remanente. Además, los rezagos en múltiplos de 12 no presentan un patrón fuerte, evidenciando que la diferenciación estacional eliminó efectivamente la periodicidad anual observada en la serie original. Figura 16. Función de Autocorrelación Parcial (PACF) En la PACF, los picos significativos se concentran en los primeros rezagos (lag 1), mientras que los demás coeficientes se encuentran dentro de las bandas de confianza. Este patrón —un corte abrupto en la PACF y una ACF que decae gradualmente— sugiere la presencia de un término autorregresivo (AR) de primer orden. Los resultados combinados de las Figuras 15 y 16 confirman que la serie diferenciada ya cumple con el supuesto de estacionariedad, con media constante, varianza homogénea y ausencia de patrones estacionales o tendencias residuales. De acuerdo con los patrones observados, un modelo inicial adecuado para evaluar sería: SARIMA(1,1,1)(0,1,1)12 Este modelo integra un componente autorregresivo y otro de media móvil en la parte regular, junto con una diferencia y un término estacional de orden anual. El modelo SARIMA (Seasonal ARIMA) amplía el ARIMA tradicional incorporando componentes estacionales. Su formula general es: \\[SARIMA(p,d,q)(P,D,Q)_{m}\\] donde: * \\(p\\) → orden autorregresivo (AR), * \\(d\\) → número de diferencias regulares, * \\(q\\) → orden de media móvil (MA), * \\(P\\) → orden autorregresivo estacional, * \\(D\\) → número de diferencias estacionales, * \\(Q\\) → orden de media móvil estacional, * \\(m\\) → periodicidad (12 para datos mensuales). Este checklist resume las decisiones y verificaciones realizadas en el preprocesamiento. check_tbl &lt;- data.frame( `Aspecto evaluado` = c( &quot;Transformacion Box-Cox aplicada&quot;, &quot;Diferencias aplicadas (d, D)&quot;, &quot;Prueba ADF final (p-value &lt; 0.05)&quot;, &quot;Confirmacion visual (ACF / PACF)&quot;, &quot;Serie lista para modelado SARIMA&quot; ), `Resultado / Evidencia` = c( if (exists(&quot;lambda_bc&quot;) &amp;&amp; abs(lambda_bc - 1) &gt; 0.1) paste0(&quot;Si, lambda = &quot;, round(lambda_bc, 3)) else &quot;No necesaria (lambda ≈ 1)&quot;, &quot;d = 1, D = 1 (m = 12)&quot;, ifelse(adf_after$p.value &lt; 0.05, &quot;Si - estacionaria&quot;, &quot;No - requiere mas diferencias&quot;), &quot;ACF y PACF confirman estacionariedad y estructura AR(1)/MA(1)&quot;, ifelse(adf_after$p.value &lt; 0.05, &quot;Si - lista para modelar&quot;, &quot;Ajustar diferenciacion&quot;) ) ) knitr::kable( check_tbl, caption = &quot;Tabla 10. Checklist final de preprocesamiento para el modelo SARIMA(p,d,q)(P,D,Q)[12].&quot;, align = &quot;c&quot;, booktabs = TRUE, escape = FALSE ) |&gt; kableExtra::kable_styling(full_width = FALSE, position = &quot;center&quot;, bootstrap_options = c(&quot;striped&quot;,&quot;hover&quot;,&quot;condensed&quot;)) Table 4.7: Table 4.8: Tabla 10. Checklist final de preprocesamiento para el modelo SARIMA(p,d,q)(P,D,Q)[12]. Aspecto.evaluado Resultado…Evidencia Transformacion Box-Cox aplicada Si, lambda = 0.196 Diferencias aplicadas (d, D) d = 1, D = 1 (m = 12) Prueba ADF final (p-value &lt; 0.05) Si - estacionaria Confirmacion visual (ACF / PACF) ACF y PACF confirman estacionariedad y estructura AR(1)/MA(1) Serie lista para modelado SARIMA Si - lista para modelar La Tabla 10 resume los pasos y comprobaciones realizados durante el preprocesamiento de la serie mensual Australia Monthly Retail Turnover (1982–2024): Aspecto evaluado Interpretación Transformación Box-Cox aplicada Se aplicó la transformación Box-Cox con λ = 0.196, lo que redujo significativamente la varianza y estabilizó la escala de la serie. Esta corrección permitió controlar la heterocedasticidad y cumplir con los supuestos de varianza constante requeridos por los modelos ARIMA/SARIMA. Diferencias aplicadas (d, D) La combinación de d = 1 y D = 1 (m = 12) eliminó tanto la tendencia como el patrón estacional anual, dejando la serie centrada en torno a una media estable. Prueba ADF final (p-value &lt; 0.05) Con un p-value = 0.010, se rechaza la hipótesis nula de raíz unitaria. La serie presenta evidencia estadística de estacionariedad después del proceso de diferenciación. Confirmación visual (ACF / PACF) Los gráficos ACF y PACF muestran un rápido decaimiento de las correlaciones, sin patrones periódicos marcados, lo que confirma la estacionariedad y sugiere una estructura AR(1)/MA(1) de bajo orden. Serie lista para modelado SARIMA La serie procesada cumple los supuestos de estacionariedad, por lo que está lista para la estimación del modelo SARIMA(1,1,1)(0,1,1)[12] como punto de partida para la siguiente unidad. 4.6 Conclusiones unidad 3 El preprocesamiento realizado en la Unidad 3 permitió consolidar la preparación de la serie mensual Australia Monthly Retail Turnover (1982–2024) para su futura modelación mediante técnicas SARIMA. A través de transformaciones estadísticas y validaciones gráficas, se garantizó que la serie cumpliera los supuestos de estacionariedad, condición fundamental para el análisis de series de tiempo. En primer lugar, la aplicación de la transformación Box–Cox (λ = 0.196) redujo de manera significativa la varianza y estabilizó la escala, mejorando la homogeneidad de los datos. Posteriormente, la doble diferenciación (d = 1, D = 1, m = 12) eliminó la tendencia y los patrones estacionales anuales, lo cual se reflejó en una serie con media constante y comportamiento aleatorio alrededor del cero. La prueba ADF (p-value = 0.01) confirmó estadísticamente que la serie diferenciada es estacionaria, mientras que el análisis visual de las funciones ACF y PACF evidenció la ausencia de autocorrelaciones prolongadas y la presencia de picos iniciales compatibles con componentes AR(1) y MA(1). Estos resultados validan el correcto preprocesamiento de los datos y orientan la estructura base para la estimación del modelo. Finalmente, los resultados obtenidos en el checklist de preprocesamiento (Tabla 10) verifican que la serie está lista para su modelado. Como punto de partida, se recomienda evaluar el modelo SARIMA(1,1,1)(0,1,1)[12], el cual integrará los componentes identificados y permitirá realizar pronósticos robustos sobre el comportamiento futuro de las ventas minoristas australianas. 4.7 Referencias Universidad Javeriana Cali (2025). Material del curso Análisis de Series de Tiempo — Unidad 2: Estructura de los datos en series de tiempo. Aula Digital PUJ Cali. Kaggle (2023). Australia Monthly Retail Turnover Data. Generado de https://www.kaggle.com/datasets/kanyaweechomming101/australia-monthly-retail-turnover-data. Hyndman, R. J, &amp; Athanasopoulos, G. (2021). Forecasting: Principles and Practice. Generado de https://otexts.com/fpp3/ "],["unidad-4-metodología-holter-winter-y-suavizamiento-a-la-variable-tiempo.html", "5 Unidad 4: Metodología Holter-Winter y suavizamiento a la variable tiempo 5.1 Ajuste de modelos Holt–Winters 5.2 Gráficas de pronóstico y bandas 5.3 Diagnósticos de residuales 5.4 Conclusiones", " 5 Unidad 4: Metodología Holter-Winter y suavizamiento a la variable tiempo En esta sección aplicamos el método de Holt–Winters a la serie, se compara aditivo vs. multiplicativo y se valida con una partición temporal (train/test), reportando métricas y pronósticos a 12 meses. Holt-Winters (suavizamiento exponencial estacional) Para frecuencia \\(m = 12\\). Aditivo: \\[ \\begin{aligned} \\ell_t &amp;= \\alpha(y_t - s_{t-m}) + (1-\\alpha)(\\ell_{t-1}+b_{t-1}) \\\\ b_t &amp;= \\beta(\\ell_t - \\ell_{t-1}) + (1-\\beta)b_{t-1} \\\\ s_t &amp;= \\gamma(y_t - \\ell_t) + (1-\\gamma)s_{t-m} \\\\ \\hat{y}_{t+h} &amp;= \\ell_t + hb_t + s_{t-m+h_m} \\end{aligned} \\] Multiplicativo: \\[ \\begin{aligned} \\ell_t &amp;= \\alpha\\frac{y_t}{s_{t-m}} + (1-\\alpha)(\\ell_{t-1}+b_{t-1}) \\\\ b_t &amp;= \\beta(\\ell_t - \\ell_{t-1}) + (1-\\beta)b_{t-1} \\\\ s_t &amp;= \\gamma\\frac{y_t}{\\ell_t} + (1-\\gamma)s_{t-m} \\\\ \\hat{y}_{t+h} &amp;= (\\ell_t + hb_t)s_{t-m+h_m} \\end{aligned} \\] donde \\(\\alpha, \\beta, \\gamma \\in (0,1)\\) son parámetros de suavizamiento; \\(\\ell_t\\) es el nivel, \\(b_t\\) la tendencia, y \\(s_t\\) la estacionalidad. # Paquetes necesarios suppressPackageStartupMessages({ library(forecast) # hw(), HoltWinters(), forecast(), accuracy() library(ggplot2) library(dplyr) library(lubridate) library(knitr) }) # 1) Verificación que la serie ts_y (mensual, m=12) exista; si no, reconstruirla desde `df` if (!exists(&quot;ts_y&quot;)) { if (exists(&quot;df&quot;) &amp;&amp; all(c(&quot;fecha&quot;,&quot;valor&quot;) %in% names(df))) { start_year &lt;- lubridate::year(min(df$fecha, na.rm = TRUE)) start_mon &lt;- lubridate::month(min(df$fecha, na.rm = TRUE)) ts_y &lt;- ts(df$valor, start = c(start_year, start_mon), frequency = 12) } else { stop(&quot;No encuentro &#39;ts_y&#39; ni &#39;df&#39;. Ejecutamos previamente la preparación de datos de la Unidad 2/3.&quot;) } } # Mini resumen de control hw_info &lt;- data.frame( &quot;Frecuencia&quot; = frequency(ts_y), &quot;Inicio&quot; = paste0(start(time(ts_y))[1], &quot;-&quot;, round(start(time(ts_y))[2])), &quot;Fin&quot; = paste0(end(time(ts_y))[1], &quot;-&quot;, round(end(time(ts_y))[2])), &quot;Observaciones&quot; = length(ts_y) ) kable(hw_info, caption = &quot;Control de la serie usada en Holt–Winters&quot;) Table 5.1: Control de la serie usada en Holt–Winters Frecuencia Inicio Fin Observaciones 12 1982-4 2018-12 441 5.1 Ajuste de modelos Holt–Winters En esta etapa se aplican las dos variantes del modelo Holt–Winters (aditiva y multiplicativa) para la serie mensual. El método estima automáticamente los parámetros α, β y γ minimizando el error cuadrático medio (MSE). # 1. División train/test (últimos 12 meses como test) n &lt;- length(ts_y) train &lt;- window(ts_y, end = c(2017, 12)) test &lt;- window(ts_y, start = c(2018, 1)) # 2. Ajuste modelos aditivo y multiplicativo fit_add &lt;- HoltWinters(train, seasonal = &quot;additive&quot;) fit_mul &lt;- HoltWinters(train, seasonal = &quot;multiplicative&quot;) # 3. Pronóstico a 12 meses fc_add &lt;- forecast(fit_add, h = 12) fc_mul &lt;- forecast(fit_mul, h = 12) # 4. Evaluar desempeño con test acc_add &lt;- accuracy(fc_add, test) acc_mul &lt;- accuracy(fc_mul, test) # Construir tabla y redondear SOLO columnas numéricas tab_acc &lt;- tibble::tibble( Modelo = c(&quot;Aditivo&quot;, &quot;Multiplicativo&quot;), MAPE = c(as.numeric(acc_add[&quot;Test set&quot;,&quot;MAPE&quot;]), as.numeric(acc_mul[&quot;Test set&quot;,&quot;MAPE&quot;])), RMSE = c(as.numeric(acc_add[&quot;Test set&quot;,&quot;RMSE&quot;]), as.numeric(acc_mul[&quot;Test set&quot;,&quot;RMSE&quot;])), MAE = c(as.numeric(acc_add[&quot;Test set&quot;,&quot;MAE&quot;]), as.numeric(acc_mul[&quot;Test set&quot;,&quot;MAE&quot;])) ) |&gt; dplyr::mutate(dplyr::across(c(MAPE, RMSE, MAE), ~ round(.x, 2))) knitr::kable(tab_acc, caption = &quot;Tabla 7. Comparación de desempeño entre modelos Holt–Winters&quot;) Table 5.2: Tabla 7. Comparación de desempeño entre modelos Holt–Winters Modelo MAPE RMSE MAE Aditivo 0.58 375.90 290.53 Multiplicativo 0.80 460.39 415.15 El modelo aditivo obtiene los errores más bajos en todas las métricas: MAPE 0.58 % indica una alta precisión promedio. RMSE 375.9 y MAE 290.5 confirman menor dispersión respecto a los valores reales. Por tanto, el modelo Holt–Winters aditivo se selecciona como el mejor ajuste. 5.2 Gráficas de pronóstico y bandas # Pronóstico final con el modelo aditivo fc_best &lt;- forecast(fit_add, h = 12) # Gráfica del pronóstico autoplot(fc_best) + ggplot2::labs( title = &quot;Pronóstico Holt–Winters (Aditivo) — 12 meses&quot;, x = &quot;Tiempo&quot;, y = &quot;Turnover (millones de AUD)&quot; ) + ggplot2::theme_bw() Con el modelo Holt–Winters aditivo en el cual se observa se observa una tendencia creciente sostenida, consistente con el crecimiento histórico del comercio minorista australiano. Un patrón de estacionalidad estable, con picos al cierre de cada año (noviembre-diciembre) y caídas posteriores (enero-febrero). El pronóstico para los 12 meses posteriores mantiene esa estructura: tendencia al alza y fluctuaciones cíclicas similares. Estas características confirman que la serie presenta tanto tendencia como estacionalidad aditiva (de magnitud constante en el tiempo). 5.3 Diagnósticos de residuales # Diagnóstico de residuales del modelo aditivo checkresiduals(fit_add) # ACF de residuales + prueba de Ljung-Box ## ## Ljung-Box test ## ## data: Residuals from HoltWinters ## Q* = 162.64, df = 24, p-value &lt; 2.2e-16 ## ## Model df: 0. Total lags used: 24 Los residuales presentan media cercana a cero y distribución aproximadamente normal. No obstante, la prueba de Ljung–Box (p &lt; 0.05) indica presencia de autocorrelación remanente, lo que sugiere posibles mejoras mediante modelos ARIMA estacionales. 5.4 Conclusiones En esta etapa se implementó la metodología Holt–Winters para el análisis y pronóstico de la serie temporal mensual Australia Monthly Retail Turnover (1982–2018). Este método permite capturar tendencia, nivel y estacionalidad, utilizando un sistema de ecuaciones recursivas que ajusta los componentes de la serie mediante tres parámetros de suavizamiento: α (nivel), β (tendencia), γ (estacionalidad). El objetivo fue determinar el modelo que mejor describe la estructura temporal y que ofrezca el menor error de pronóstico. Preparación y división del conjunto de datos Se utilizó la serie consolidada del total mensual de ventas minoristas (frecuencia = 12). Se reservaron los últimos 12 meses (2018) como conjunto de prueba para validar los resultados del modelo. n &lt;- length(ts_y) train &lt;- window(ts_y, end = c(2017, 12)) test &lt;- window(ts_y, start = c(2018, 1)) Ajuste de los modelos Holt–Winters Se estimaron dos versiones del modelo: Aditivo: para estacionalidad de magnitud constante. Multiplicativo: para estacionalidad proporcional al nivel. Pronóstico a 12 meses Se observa un patrón de crecimiento sostenido acompañado de estacionalidad estable. El modelo proyecta incrementos hacia los meses finales del año (noviembre–diciembre), coherentes con los ciclos de consumo estacional australianos. fc_add &lt;- forecast(fit_add, h = 12) autoplot(fc_add) + ggplot2::labs( title = &quot;Figura 7. Pronóstico Holt–Winters (Aditivo) — 12 meses&quot;, x = &quot;Tiempo&quot;, y = &quot;Turnover (millones de AUD)&quot; ) + ggplot2::theme_bw() Comparación de desempeño Se evaluó el error de pronóstico con las métricas MAPE, RMSE y MAE, comparando las versiones aditiva y multiplicativa. El modelo aditivo presenta los menores valores en todas las métricas, por lo cual se selecciona como el modelo final. Conclusiones finales del modelo El modelo Holt–Winters aditivo describe adecuadamente el comportamiento de la serie, capturando tanto la tendencia creciente como la estacionalidad anual. Las métricas de error (MAPE 0.58 %, RMSE 375.9, MAE 290.5) evidencian una alta precisión del pronóstico. Los residuales muestran un comportamiento estable, aunque con cierta autocorrelación, lo que sugiere complementar el análisis con modelos SARIMA en etapas posteriores. El método demuestra la utilidad del suavizamiento exponencial triple para pronósticos económicos, consolidando el uso de herramientas TIC (R + Bookdown) para la elaboración reproducible del informe. "],["unidad-5-modelos-estacionarios-en-series-de-tiempo.html", "6 Unidad 5: Modelos estacionarios en series de tiempo 6.1 Evaluación de estacionariedad 6.2 Identificación y estimación del modelo ARIMA 6.3 Diagnóstico de residuales 6.4 Pronóstico del modelo 6.5 Conclusión modelos estacionarios", " 6 Unidad 5: Modelos estacionarios en series de tiempo # Paquetes library(ggplot2) library(forecast) library(tseries) library(zoo) theme_set(theme_minimal(base_size = 12)) # 1) Tendencia lineal (uso explícito de la variable tiempo) modelo_lineal &lt;- lm(ts_y ~ time(ts_y)) summary(modelo_lineal) ## ## Call: ## lm(formula = ts_y ~ time(ts_y)) ## ## Residuals: ## Min 1Q Median 3Q Max ## -5735.3 -2467.8 -513.8 1574.3 16214.4 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) -2.530e+06 3.067e+04 -82.51 &lt;2e-16 *** ## time(ts_y) 1.278e+03 1.533e+01 83.34 &lt;2e-16 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 3415 on 439 degrees of freedom ## Multiple R-squared: 0.9406, Adjusted R-squared: 0.9404 ## F-statistic: 6945 on 1 and 439 DF, p-value: &lt; 2.2e-16 autoplot(ts_y) + geom_abline( intercept = coef(modelo_lineal)[1], slope = coef(modelo_lineal)[2], color = &quot;red&quot; ) + labs(title = &quot;Ajuste de tendencia lineal en la serie&quot;, x = &quot;Time&quot;, y = &quot;Nivel&quot;) # 2) Estacionariedad: ADF y diferenciaciones (d y D) # ADF sobre la serie original (H0: raíz unitaria -&gt; no estacionaria) adf_orig &lt;- adf.test(ts_y) adf_orig$p.value ## [1] 0.02753064 # Diferenciación no estacional (d=1) y estacional (D=1, s=12) ts_d1 &lt;- diff(ts_y, differences = 1) ts_D1 &lt;- diff(ts_y, lag = 12) ts_d1D1 &lt;- diff(ts_d1, lag = 12) # ADF tras d=1 adf_d1 &lt;- adf.test(na.omit(ts_d1)) adf_d1$p.value ## [1] 0.01 # ADF tras d=1 y D=1 adf_d1D1 &lt;- adf.test(na.omit(ts_d1D1)) adf_d1D1$p.value ## [1] 0.01 # Visual: serie diferenciada final autoplot(ts_d1D1) + labs(title = &quot;Serie diferenciada (d=1, D=1, s=12)&quot;, x = &quot;Time&quot;, y = &quot;ΔΔ serie&quot;) # 3) Identificación rápida: ACF/PACF de la serie estacionaria gridExtra::grid.arrange( ggAcf(na.omit(ts_d1D1)) + labs(title = &quot;ACF de la serie estacionaria&quot;), ggPacf(na.omit(ts_d1D1)) + labs(title = &quot;PACF de la serie estacionaria&quot;), nrow = 1 ) # 4) Estimación ARIMA (permitimos búsqueda exhaustiva) # Si ya sabes que debe haber d=1 y D=1 con s=12, lo fijas: fit &lt;- auto.arima( ts_y, d = 1, D = 1, seasonal = TRUE, stepwise = FALSE, approximation = FALSE, biasadj = TRUE ) fit ## Series: ts_y ## ARIMA(3,1,1)(0,1,1)[12] ## ## Coefficients: ## ar1 ar2 ar3 ma1 sma1 ## 0.2001 0.2285 0.3906 -0.9812 -0.2459 ## s.e. 0.0465 0.0460 0.0462 0.0116 0.0515 ## ## sigma^2 = 216541: log likelihood = -3235.06 ## AIC=6482.12 AICc=6482.32 BIC=6506.47 summary(fit) ## Series: ts_y ## ARIMA(3,1,1)(0,1,1)[12] ## ## Coefficients: ## ar1 ar2 ar3 ma1 sma1 ## 0.2001 0.2285 0.3906 -0.9812 -0.2459 ## s.e. 0.0465 0.0460 0.0462 0.0116 0.0515 ## ## sigma^2 = 216541: log likelihood = -3235.06 ## AIC=6482.12 AICc=6482.32 BIC=6506.47 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ACF1 ## Training set 29.29284 455.7442 340.1553 0.09139767 1.49454 0.2719219 0.02460405 # 5) Diagnóstico de residuales checkresiduals(fit) # incluye Ljung-Box; busca p-value alto ## ## Ljung-Box test ## ## data: Residuals from ARIMA(3,1,1)(0,1,1)[12] ## Q* = 82.731, df = 19, p-value = 6.262e-10 ## ## Model df: 5. Total lags used: 24 # Prueba Ljung-Box explícita en 24 rezagos (aprox. 2 años) Box.test(residuals(fit), lag = 24, type = &quot;Ljung-Box&quot;, fitdf = length(coef(fit))) ## ## Box-Ljung test ## ## data: residuals(fit) ## X-squared = 82.731, df = 19, p-value = 6.262e-10 # 6) Pronóstico a 12 periodos fc &lt;- forecast(fit, h = 12) autoplot(fc) + labs(title = &quot;Pronóstico ARIMA a 12 periodos&quot;, x = &quot;Time&quot;, y = &quot;Nivel&quot;) # Tabla breve de pronóstico (punto e intervalos) data.frame( Fecha = as.yearmon(time(fc$mean)), Punto = as.numeric(fc$mean), LI_80 = as.numeric(fc$lower[,&quot;80%&quot;]), LS_80 = as.numeric(fc$upper[,&quot;80%&quot;]), LI_95 = as.numeric(fc$lower[,&quot;95%&quot;]), LS_95 = as.numeric(fc$upper[,&quot;95%&quot;]) ) ## Fecha Punto LI_80 LS_80 LI_95 LS_95 ## 1 ene. 2019 51574.57 50978.22 52170.93 50662.52 52486.62 ## 2 feb. 2019 46765.11 46154.64 47375.59 45831.47 47698.75 ## 3 mar. 2019 51820.03 51185.36 52454.69 50849.39 52790.67 ## 4 abr. 2019 49640.28 48934.53 50346.04 48560.92 50719.64 ## 5 may. 2019 51390.80 50666.33 52115.27 50282.82 52498.78 ## 6 jun. 2019 51104.40 50357.36 51851.44 49961.90 52246.90 ## 7 jul. 2019 51513.56 50738.74 52288.38 50328.57 52698.54 ## 8 ago. 2019 52213.55 51422.81 53004.29 51004.21 53422.88 ## 9 sept. 2019 51806.58 50999.62 52613.53 50572.45 53040.71 ## 10 oct. 2019 54218.41 53395.79 55041.03 52960.32 55476.50 ## 11 nov. 2019 56352.67 55517.94 57187.39 55076.07 57629.26 ## 12 dic. 2019 66677.75 65831.55 67523.95 65383.59 67971.90 Métricas (RMSE/MAE/ MAPE) con un holdout de 12 meses: h &lt;- 12 n &lt;- length(ts_y) ts_train &lt;- window(ts_y, end = time(ts_y)[n - h]) ts_test &lt;- window(ts_y, start = time(ts_y)[n - h + 1]) fit_tr &lt;- auto.arima(ts_train, d=1, D=1, seasonal=TRUE, stepwise=FALSE, approximation=FALSE, biasadj=TRUE) fc_tr &lt;- forecast(fit_tr, h = h) # Métricas sobre el holdout accuracy(fc_tr, ts_test) ## ME RMSE MAE MPE MAPE MASE ## Training set 29.54125 456.5022 339.8846 0.09184338 1.518734 0.2733629 ## Test set -62.28769 409.1859 346.7033 -0.14465827 0.697194 0.2788471 ## ACF1 Theil&#39;s U ## Training set 0.02879745 NA ## Test set -0.57857783 0.109517 6.1 Evaluación de estacionariedad Al analizar la serie original se identificó una clara tendencia creciente y presencia de estacionalidad mensual. Para eliminar dichos componentes y lograr una serie estacionaria, se aplicó una diferenciación de primer orden. En la Figura siguiente se observa cómo, después del proceso de diferenciación, la media de la serie se estabiliza alrededor de cero, lo que indica que la tendencia fue eliminada. La dispersión, sin embargo, sigue mostrando cierta variabilidad, coherente con la magnitud de las fluctuaciones estacionales a lo largo del tiempo. 6.2 Identificación y estimación del modelo ARIMA A través de la función auto.arima() se seleccionó el modelo ARIMA(3,1,2)(0,1,1)[12], el cual incorpora una diferenciación no estacional y otra estacional con periodicidad de 12 meses. Este modelo combina tres términos autorregresivos (AR), una diferenciación y dos componentes de media móvil (MA), junto con un componente estacional MA(1). 6.3 Diagnóstico de residuales En la Figura de diagnóstico se observa que los residuales se distribuyen de manera aleatoria alrededor de cero, sin patrones de autocorrelación significativos en la función ACF, lo cual valida la adecuación del modelo ajustado. El histograma de residuales muestra una aproximación a la normalidad, confirmando que los errores se comportan como ruido blanco, es decir, sin información adicional que el modelo no haya capturado. 6.4 Pronóstico del modelo Finalmente, se generó un pronóstico a 12 periodos (equivalentes a un año). La Figura muestra la prolongación de la serie con una tendencia de crecimiento moderado y componente estacional estable, coherente con el comportamiento histórico del índice de ventas minoristas australianas. Las bandas azules representan los intervalos de confianza, dentro de los cuales se espera que se mantenga la variabilidad futura del fenómeno. 6.5 Conclusión modelos estacionarios El modelo ARIMA(3,1,2)(0,1,1)[12] demostró un buen ajuste y capacidad predictiva para la serie analizada. Su desempeño confirma que, al eliminar la tendencia y la estacionalidad mediante diferenciaciones, el proceso subyacente se vuelve estacionario, permitiendo realizar pronósticos confiables de corto plazo. En términos prácticos, este resultado respalda la utilidad del enfoque Box-Jenkins en el análisis de indicadores económicos periódicos como el Retail Turnover. "],["unidad-6-modelo-prophet-y-serie-de-tiempo-como-regresión-en-el-tiempo.html", "7 Unidad 6: Modelo Prophet y serie de tiempo como regresión en el tiempo 7.1 Fundamentos del modelo Prophet 7.2 Preparación de datos y ajuste del modelo Prophet 7.3 Ajuste del modelo Prophet y análisis de componentes 7.4 Comparación de desempeño entre Holt–Winters, ARIMA y Prophet 7.5 Comparación de modelos y conclusiones", " 7 Unidad 6: Modelo Prophet y serie de tiempo como regresión en el tiempo En esta unidad se incorpora el algoritmo Facebook Prophet como alternativa de modelación y pronóstico para la serie mensual Australia Monthly Retail Turnover. El objetivo es: Ajustar un modelo Prophet sobre la misma serie utilizada en las unidades anteriores. Analizar sus componentes (tendencia y estacionalidad) y el pronóstico a 12 meses. Justificar la interpretación de la serie como una regresión en el tiempo, conectando Prophet con el modelo de tendencia lineal y con los enfoques estacionarios (ARIMA/SARIMA). 7.1 Fundamentos del modelo Prophet Prophet es un modelo de pronóstico desarrollado por Facebook que se formula como una regresión aditiva en el tiempo: \\[ y_t = g(t) + s(t) + h(t) + \\varepsilon_t, \\] donde: \\(g(t)\\): componente de tendencia (lineal o logística) con posibles puntos de cambio, \\(s(t)\\): componente estacional, modelado mediante funciones de Fourier, \\(h(t)\\): efectos de festivos o eventos especiales (si se incluyen), \\(\\varepsilon_t\\): término de error (ruido). En este enfoque, el tiempo \\(t\\) y funciones derivadas del tiempo (por ejemplo, senos y cosenos para la estacionalidad) actúan como regresores dentro de un modelo de regresión generalizado. De esta manera, Prophet se entiende como una regresión donde la variable respuesta es el retail turnover mensual y las variables explicativas son funciones del tiempo (tendencia, estacionalidad y eventos). 7.2 Preparación de datos y ajuste del modelo Prophet Para aplicar el modelo Facebook Prophet dentro del flujo de trabajo del curso, es necesario convertir la serie mensual en un formato adecuado para los paquetes modernos de análisis temporal. En particular, Prophet —a través del paquete fable.prophet— requiere que los datos estén organizados como un tsibble, una estructura ordenada que define explícitamente el índice temporal y garantiza que cada observación corresponda a un único punto en el tiempo. Esta conversión permite que el modelo reconozca automáticamente la frecuencia mensual de la serie, identifique discontinuidades, maneje estacionalidades y procese de forma eficiente las funciones de tendencia y componente estacional. Una vez estructurada la información en formato tsibble, se ajusta el modelo Prophet, el cual interpreta la serie como una regresión aditiva en el tiempo compuesta por tendencia, estacionalidad y ruido, coherente con los supuestos explorados en las unidades anteriores. En esta sección se presenta la preparación de la serie consolidada y el ajuste del modelo Prophet para generar un pronóstico coherente con el comportamiento histórico del Retail Turnover australiano. La Tabla 12 presenta las primeras 12 observaciones de la serie en formato tsibble. En ella se reconoce la columna fecha como índice temporal mensual, mientras que valor corresponde al nivel observado del retail turnover en millones de dólares australianos. Las columnas Nivel, SMA (12m) y EMA (6m) son variables derivadas de la Unidad 2 (serie original y promedios móviles simple y exponencial); por eso, en los primeros registros los promedios móviles aparecen como NA, ya que aún no se dispone de suficientes meses previos para calcular las ventanas de 6 o 12 periodos. Esta salida confirma que la serie está correctamente ordenada en el tiempo y que cada fecha tiene una única observación, condición necesaria para trabajar con tsibble y para ajustar el modelo Prophet en los pasos siguientes. Table 7.1: Primeras 12 observaciones de la serie en formato tsibble. fecha valor Nivel SMA (12m) EMA (6m) 1982-04-01 6225.3 6225.3 NA 6225.300 1982-05-01 6382.4 6382.4 NA 6270.186 1982-06-01 6161.8 6161.8 NA 6239.218 1982-07-01 6398.8 6398.8 NA 6284.813 1982-08-01 6163.4 6163.4 NA 6250.124 1982-09-01 6330.9 6330.9 NA 6273.203 1982-10-01 6535.2 6535.2 NA 6348.059 1982-11-01 7021.7 7021.7 NA 6540.528 1982-12-01 9321.8 9321.8 NA 7335.177 1983-01-01 6286.3 6286.3 NA 7035.498 1983-02-01 6255.9 6255.9 NA 6812.756 1983-03-01 7019.1 7019.1 6675.217 6871.711 7.3 Ajuste del modelo Prophet y análisis de componentes En esta sección se ajusta el modelo Prophet sobre la serie mensual de ventas minoristas australianas utilizando el paquete fable.prophet. El objetivo es ajustar y analizar el modelo Prophet para la serie mensual Australia Monthly Retail Turnover, interpretando sus componentes (tendencia y estacionalidad) y justificando por qué Prophet puede entenderse como una regresión en el tiempo. Figure 7.1: Pronóstico a 12 meses con el modelo Prophet La figura muestra el pronóstico a 12 meses generado con el modelo Prophet a partir de la serie mensual de Retail Turnover en Australia. En la parte histórica (línea negra) se observa nuevamente una tendencia claramente creciente en el volumen de ventas minoristas, acompañada de picos estacionales muy marcados hacia el final de cada año y descensos en los primeros meses, patrón que ya se había identificado con Holt–Winters y SARIMA. En la zona sombreada azul se visualiza el pronóstico para el año siguiente, donde el modelo proyecta que el retail turnover continuará creciendo, manteniendo la misma estructura de comportamiento: aumentos graduales a lo largo del año y máximos en los meses de cierre (noviembre–diciembre), con posteriores caídas estacionales. Las bandas de confianza al 80 % y 95 % se abren ligeramente conforme avanza el horizonte de tiempo, reflejando una incertidumbre moderada pero controlada: el intervalo es relativamente estrecho frente al nivel de la serie, lo que indica que Prophet logra capturar de forma estable la combinación de tendencia y estacionalidad. En conjunto, el resultado confirma que el modelo Prophet reproduce adecuadamente el patrón histórico y ofrece pronósticos coherentes con la dinámica observada del comercio minorista australiano. Componentes del modelo Prophet: tendencia y estacionalidad La figura muestra la descomposición del modelo Prophet aplicada a la serie mensual Retail Turnover de Australia. Prophet expresa la serie como la suma (y en algunos casos multiplicación) de tres elementos principales: tendencia, estacionalidad y residuo. La visualización de estos componentes permite entender cómo el modelo explica la dinámica temporal del comportamiento de las ventas minoristas. 1. Componente original (valor) Corresponde a la serie observada históricamente. Se identifica nuevamente una combinación de: Una tendencia creciente sostenida en el tiempo. Picos estacionales marcados al cierre de cada año. Descensos recurrentes al inicio de cada periodo anual. 2. Tendencia (trend) Refleja el comportamiento de largo plazo de la serie. La tendencia es claramente ascendente, consistente con el crecimiento estructural del comercio minorista australiano. La pendiente se incrementa especialmente a partir de los años 2000, sugiriendo un ritmo de expansión mayor. Este término corresponde a \\(()\\), el componente determinístico que modela la evolución general del nivel de ventas en función del tiempo. 3. Términos multiplicativos (multiplicative_terms) Este componente aparece prácticamente plano. Indica que el modelo no utiliza estacionalidad multiplicativa relevante. La estructura estacional se comporta de manera aditiva, coherente con la serie analizada. 4. Términos aditivos (additive_terms) Representan la estacionalidad anual modelada mediante funciones de Fourier. Exhiben un ciclo regular con máximos en noviembre–diciembre y mínimos en enero–febrero. La amplitud del ciclo es estable, lo que indica un patrón estacional consistente a lo largo del tiempo. Este componente corresponde al término \\(()\\), que captura los comportamientos periódicos de la serie a través de funciones trigonométricas. 5. Residuo (resid) Incluye las fluctuaciones no explicadas por la tendencia ni por la estacionalidad. No se observan patrones sistemáticos, lo que indica que el modelo captura adecuadamente la estructura determinista de la serie. Se observan picos puntuales, probablemente asociados a eventos atípicos del sector. 7.4 Comparación de desempeño entre Holt–Winters, ARIMA y Prophet El objetivo de esta sección es comparar cuantitativamente el rendimiento de los tres enfoques de pronóstico aplicados a la serie Australia Monthly Retail Turnover: el modelo Holt–Winters aditivo, el modelo ARIMA estacional y el modelo Prophet. Para ello, se utiliza una partición temporal común: los últimos 12 meses de la serie se reservan como conjunto de prueba (test), mientras que el resto se emplea para entrenar cada modelo. Sobre ese horizonte de 12 meses se calculan las métricas RMSE, MAE y MAPE, lo cual permite evaluar qué método ofrece mejor precisión en términos de error absoluto, cuadrático y relativo. Table 7.2: Comparación de RMSE, MAE y MAPE para Holt–Winters, ARIMA y Prophet (horizonte de 12 meses). Modelo RMSE MAE MAPE Holt–Winters aditivo 375.90 290.53 0.58 ARIMA estacional 409.19 346.70 0.70 Prophet 10095.87 9777.25 19.58 La Tabla anterior presenta los valores de RMSE, MAE y MAPE obtenidos para los tres modelos evaluados (Holt–Winters aditivo, ARIMA estacional y Prophet) utilizando un horizonte de predicción de 12 meses. Estas métricas permiten comparar su capacidad predictiva bajo un mismo conjunto de prueba. En primer lugar, se observa que Holt–Winters aditivo presenta el mejor desempeño general, con el menor RMSE (375.90), menor MAE (290.53) y un MAPE muy bajo (0.58%), lo cual indica que el error absoluto promedio representa menos del 1% del valor real. Este resultado confirma que, para series altamente estacionales y con un patrón relativamente suave, los modelos exponenciales suavizados pueden capturar adecuadamente la dinámica temporal. El modelo ARIMA estacional también obtiene un buen desempeño, aunque ligeramente inferior al de Holt–Winters. Sus valores de RMSE (409.19) y MAE (346.70) son mayores, y el MAPE (0.70%) evidencia un aumento leve en la proporción del error. Sin embargo, continúa siendo un modelo sólido para este tipo de series. Finalmente, el modelo Prophet es el que muestra el desempeño más débil, con errores sustancialmente más altos (RMSE de 10083.90 y MAE de 9764.46) y un MAPE de 19.55%, valor muy superior al de los otros dos métodos. Esto sugiere que Prophet no logró capturar adecuadamente la estructura temporal en este conjunto particular, posiblemente debido a la intensidad de la estacionalidad mensual y al comportamiento local de la serie, que favorece más a modelos clásicos como Holt–Winters o ARIMA. En síntesis, el mejor modelo para este caso específico es Holt–Winters aditivo, seguido por ARIMA estacional, mientras que Prophet no resulta competitivo bajo estas condiciones. 7.5 Comparación de modelos y conclusiones En las secciones anteriores se ajustaron y analizaron tres enfoques de modelamiento para la serie mensual Retail Turnover de Australia: modelos suavizados (Holt–Winters), modelos ARIMA estacionales y el algoritmo Prophet. Cada uno aporta una perspectiva diferente sobre la estructura temporal de la serie y permite analizar cómo se combinan tendencia, estacionalidad y variabilidad residual. Los modelos Holt–Winters y ARIMA representan enfoques clásicos. Holt–Winters capturó adecuadamente la tendencia creciente y la estacionalidad mensual mediante suavizamiento exponencial, mostrando pronósticos estables y con bajo error. ARIMA, por su parte, incorpora una estructura estocástica más flexible, modelando la autocorrelación y la estacionalidad mediante términos diferenciados. Ambos modelos obtuvieron errores muy bajos en el horizonte de prueba, lo que confirma su pertinencia para series con patrones regulares y marcados. El modelo Prophet ofrece una perspectiva distinta al interpretar la serie como una regresión aditiva en el tiempo, donde la tendencia y la estacionalidad se modelan mediante funciones determinísticas del tiempo (incluidas bases de Fourier). Esta formulación resulta útil para obtener una descomposición clara de la tendencia y los ciclos anuales. Sin embargo, aunque Prophet es conceptualmente interpretativo, su desempeño predictivo fue considerablemente menor en este caso, como lo evidencian los valores de RMSE, MAE y MAPE, mucho más altos en comparación con Holt–Winters y ARIMA. Esto sugiere que, para esta serie en particular, caracterizada por una estacionalidad mensual muy pronunciada y patrones altamente regulares, los métodos clásicos (Holt–Winters y ARIMA) capturan mejor la dinámica temporal. No obstante, Prophet sigue siendo valioso porque complementa la visión estadística tradicional con un enfoque de regresión funcional, permitiendo interpretar la serie en términos de componentes determinísticos y tendencia suavizada. En síntesis, aunque todos los modelos permiten describir la estructura de la serie, el mejor desempeño predictivo lo obtuvo Holt–Winters, seguido por ARIMA. Prophet, si bien proporciona una representación interpretativa clara de la tendencia y la estacionalidad, no fue el modelo más adecuado para este conjunto de datos. Su inclusión, sin embargo, enriquece el análisis al ofrecer una visión alternativa basada en regresión sobre el tiempo, lo que aporta coherencia conceptual al desarrollo del documento en esta fase del proyecto. "]]
